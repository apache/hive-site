<!doctype html><html><!doctype html>
<html>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content>
<meta name=author content>
<title>Apache Hive : LanguageManual Indexing</title>
<link rel=icon href=/images/hive.svg sizes=any type=image/svg+xml>
<link rel=stylesheet href=https://hive.apache.org/css/hive-theme.css>
<link rel=stylesheet href=https://hive.apache.org/css/font-awesome.all.min.css>
<link rel=stylesheet href=https://hive.apache.org/css/bootstrap.min.css>
<link rel=stylesheet href=https://hive.apache.org/css/termynal.css>
<link rel=apple-touch-icon sizes=180x180 href=https://hive.apache.org/images/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=https://hive.apache.org/images/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=https://hive.apache.org/images/favicon-16x16.png>
<link rel=manifest href=https://hive.apache.org/images/site.webmanifest>
<link rel=mask-icon href=https://hive.apache.org/images/safari-pinned-tab.svg color=#5bbad5>
<meta name=msapplication-TileColor content="#da532c">
<meta name=theme-color content="#ffffff">
<script>var _paq=window._paq=window._paq||[];_paq.push(['disableCookies']),_paq.push(['trackPageView']),_paq.push(['enableLinkTracking']),function(){var b="https://analytics.apache.org/",c,a,d;_paq.push(['setTrackerUrl',b+'matomo.php']),_paq.push(['setSiteId','30']),c=document,a=c.createElement('script'),d=c.getElementsByTagName('script')[0],a.async=!0,a.src=b+'matomo.js',d.parentNode.insertBefore(a,d)}()</script>
</head>
<body>
<body>
<header>
<menu style=background:#000;margin:0>
<nav class="navbar navbar-expand-lg navbar-dark bg-black">
<div class=container-fluid>
<a href=https://hive.apache.org> <img src=https://hive.apache.org/images/hive.svg width=60 height=35 alt="Apache Software Foundation"></a>
<a class="header-text navbar-brand" href=https://hive.apache.org>Apache Hive</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span>
</button>
<div class="collapse navbar-collapse" id=navbarSupportedContent>
<ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item dropdown">
<a class=nav-link href=/general/downloads id=navbarDropdown role=button aria-expanded=false>
Releases
</a>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=/Document id=navbarDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
Documentation
</a>
<ul class=dropdown-menu aria-labelledby=navbarDropdown>
<li><a class=dropdown-item href=/docs/latest/>Latest</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/docs/javadocs/>Javadocs</a></li>
<li><a class=dropdown-item href=https://cwiki.apache.org/confluence/display/Hive/LanguageManual>Language Manual</a></li>
</ul>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=/general id=navbarDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
General
</a>
<ul class=dropdown-menu aria-labelledby=navbarDropdown>
<li><a class=dropdown-item href=https://www.apache.org/licenses/LICENSE-2.0.html>License</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/general/privacypolicy/>Privacy Policy</a></li>
</ul>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
Development
</a>
<ul class=dropdown-menu aria-labelledby=navbarDropdown>
<li><a class=dropdown-item href=https://hive.apache.org/development/gettingstarted/>Getting Started</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/development/quickstart/>Quickstart with Docker</a></li>
<li><a class=dropdown-item href=https://cwiki.apache.org/confluence/display/Hive/DesignDocs>Design Docs</a></li>
<li><a class=dropdown-item href=https://issues.apache.org/jira/projects/HIVE/issues>Hive JIRA</a></li>
<li><a class=dropdown-item href=https://cwiki.apache.org/confluence/display/Hive/HiveDeveloperFAQ>Hive Developer FAQ</a></li>
<li><a class=dropdown-item href=https://cwiki.apache.org/confluence/display/Hive/Hive+PreCommit+Patch+Testing>Precommit Patch Testing</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/development/versioncontrol/>Version Control</a></li>
</ul>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
Community
</a>
<ul class=dropdown-menu aria-labelledby=navbarDropdown>
<li><a class=dropdown-item href=/community/becomingcommitter/>Becoming A Committer</a></li>
<li><a class=dropdown-item href=https://cwiki.apache.org/confluence/display/Hive/HowToContribute>How To Contribute</a></li>
<li><a class=dropdown-item href=https://cwiki.apache.org/confluence/display/Hive/Home#Home-ResourcesforContributors>Resources for Contributors</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/community/mailinglists/>Mailing Lists</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/community/issuetracking/>Issue Tracking</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/community/people/>People</a></li>
<li>
<hr class=dropdown-divider>
</li>
<li><a class=dropdown-item href=/community/bylaws/>By Laws</a></li>
<li><a class=dropdown-item href=https://cwiki.apache.org/confluence/display/Hive/HowToRelease>How To Release</a></li>
</ul>
</li>
<li class="nav-item dropdown">
<a class=nav-link href=https://hive.blog.apache.org/ id=navbarDropdown role=button aria-expanded=false>
Blogs
</a>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
ASF
</a>
<ul class=dropdown-menu aria-labelledby=navbarDropdown>
<li><a class=dropdown-item href=https://www.apache.org/foundation/contributing.html>Donations</a></li>
<li><a class=dropdown-item href=https://www.apache.org/foundation/sponsorship.html>Sponsorship</a></li>
<li><a class=dropdown-item href=https://www.apache.org/foundation/thanks.html>Thanks</a></li>
<li><a class=dropdown-item href=https://www.apache.org/>Website</a></li>
</ul>
</li>
<li>
<form action=/search method=get class=search-bar>
<input type=search name=q id=search-query placeholder=Search... class=search-input>
<button type=submit class=search-button>Search</button>
</form>
</li>
</ul>
</div>
</div>
</nav>
</menu>
</header>
<div class=content>
<div class=docs>
<h1 id=apache-hive--languagemanual-indexing>Apache Hive : LanguageManual Indexing</h1>
<ul>
<li><a href=#indexing-is-removed-since-30>Indexing Is Removed since 3.0</a></li>
<li><a href=#overview-of-hive-indexes>Overview of Hive Indexes</a></li>
<li><a href=#indexing-resources>Indexing Resources</a>
<ul>
<li><a href=#configuration-parameters-for-hive-indexes>Configuration Parameters for Hive Indexes</a></li>
</ul>
</li>
<li><a href=#simple-examples>Simple Examples</a></li>
</ul>
<h2 id=indexing-is-removed-since-30>Indexing Is Removed since 3.0</h2>
<p>There are alternate options which might work similarily to indexing:</p>
<ul>
<li>Materialized views with automatic rewriting can result in very similar results.  <a href=https://issues.apache.org/jira/browse/HIVE-14249>Hive 2.3.0</a> adds support for materialzed views.</li>
<li>Using columnar file formats (<a href=https://hive.apache.org/docs/latest/parquet_38570914/>Parquet</a>, <a href=https://orc.apache.org/docs/indexes.html>ORC</a>) – they can do selective scanning; they may even skip entire files/blocks.</li>
</ul>
<p>Indexing has been <strong>removed</strong> in version 3.0 (<a href=https://issues.apache.org/jira/browse/HIVE-18448>HIVE-18448</a>).</p>
<h2 id=overview-of-hive-indexes>Overview of Hive Indexes</h2>
<p>The goal of Hive indexing is to improve the speed of query lookup on certain columns of a table. Without an index, queries with predicates like &lsquo;WHERE tab1.col1 = 10&rsquo; load the entire table or partition and process all the rows. But if an index exists for col1, then only a portion of the file needs to be loaded and processed.</p>
<p>The improvement in query speed that an index can provide comes at the cost of additional processing to create the index and disk space to store the index.</p>
<p>Versions</p>
<p>Hive indexing was added in version 0.7.0, and bitmap indexing was added in version 0.8.0.</p>
<h2 id=indexing-resources>Indexing Resources</h2>
<p>Documentation and examples of how to use Hive indexes can be found here:</p>
<ul>
<li><a href=https://cwiki.apache.org/confluence/display/Hive/IndexDev>Indexes</a> – design document (lists indexing JIRAs with current status, starting with <a href=https://issues.apache.org/jira/browse/HIVE-417>HIVE-417</a>)</li>
<li><a href=#create/drop/alter-index>Create/Drop/Alter Index</a> – <a href=https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL>HiveQL Language Manual DDL</a></li>
<li><a href=https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-ShowIndexes>Show Indexes</a> – <a href=https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL>HiveQL Language Manual DDL</a></li>
<li><a href=https://cwiki.apache.org/confluence/display/Hive/IndexDev+Bitmap>Bitmap indexes</a> – added in Hive version 0.8.0 (<a href=https://issues.apache.org/jira/browse/HIVE-1803>HIVE-1803</a>)</li>
<li><a href=http://www.slideshare.net/NikhilDeshpande/indexed-hive>Indexed Hive</a> – overview and examples by Prafulla Tekawade and Nikhil Deshpande, October 2010</li>
<li><a href=http://asheeshgarg.blogspot.com/2012/04/sql-like-join-and-index-with-mr-using.html>Tutorial: SQL-like join and index with MapReduce using Hadoop and Hive</a> – blog by Ashish Garg, April 2012</li>
</ul>
<h3 id=configuration-parameters-for-hive-indexes>Configuration Parameters for Hive Indexes</h3>
<p>The <a href=#configuration-properties>Configuration Properties</a> document describes parameters that configure Hive indexes.</p>
<h2 id=simple-examples>Simple Examples</h2>
<p>This section gives some indexing examples adapted from the Hive test suite.</p>
<p>Case sensitivity</p>
<p>In Hive 0.12.0 and earlier releases, the index name is case-sensitive for CREATE INDEX and DROP INDEX statements. However, ALTER INDEX requires an index name that was created with lowercase letters (see <a href=https://issues.apache.org/jira/browse/HIVE-2752>HIVE-2752</a>). This bug is fixed in <a href=https://issues.apache.org/jira/browse/HIVE-2752>Hive 0.13.0</a> by making index names case-insensitive for all HiveQL statements. For releases prior to 0.13.0, the best practice is to use lowercase letters for all index names.</p>
<p> </p>
<p>Create/build, show, and drop index:</p>
<pre tabindex=0><code>CREATE INDEX table01_index ON TABLE table01 (column2) AS 'COMPACT';
SHOW INDEX ON table01;
DROP INDEX table01_index ON table01;

</code></pre><p>Create then build, show formatted (with column names), and drop index:</p>
<pre tabindex=0><code>CREATE INDEX table02_index ON TABLE table02 (column3) AS 'COMPACT' WITH DEFERRED REBUILD;
ALTER INDEX table02_index ON table2 REBUILD;
SHOW FORMATTED INDEX ON table02;
DROP INDEX table02_index ON table02;

</code></pre><p>Create bitmap index, build, show, and drop:</p>
<pre tabindex=0><code>CREATE INDEX table03_index ON TABLE table03 (column4) AS 'BITMAP' WITH DEFERRED REBUILD;
ALTER INDEX table03_index ON table03 REBUILD;
SHOW FORMATTED INDEX ON table03;
DROP INDEX table03_index ON table03;

</code></pre><p>Create index in a new table:</p>
<pre tabindex=0><code>CREATE INDEX table04_index ON TABLE table04 (column5) AS 'COMPACT' WITH DEFERRED REBUILD IN TABLE table04_index_table;

</code></pre><p>Create index stored as RCFile:</p>
<pre tabindex=0><code>CREATE INDEX table05_index ON TABLE table05 (column6) AS 'COMPACT' STORED AS RCFILE;

</code></pre><p>Create index stored as text file:</p>
<pre tabindex=0><code>CREATE INDEX table06_index ON TABLE table06 (column7) AS 'COMPACT' ROW FORMAT DELIMITED FIELDS TERMINATED BY '\t' STORED AS TEXTFILE;

</code></pre><p>Create index with index properties:</p>
<pre tabindex=0><code>CREATE INDEX table07_index ON TABLE table07 (column8) AS 'COMPACT' IDXPROPERTIES (&quot;prop1&quot;=&quot;value1&quot;, &quot;prop2&quot;=&quot;value2&quot;);

</code></pre><p>Create index with table properties:</p>
<pre tabindex=0><code>CREATE INDEX table08_index ON TABLE table08 (column9) AS 'COMPACT' TBLPROPERTIES (&quot;prop3&quot;=&quot;value3&quot;, &quot;prop4&quot;=&quot;value4&quot;);

</code></pre><p>Drop index if exists:</p>
<pre tabindex=0><code>DROP INDEX IF EXISTS table09_index ON table09;

</code></pre><p>Rebuild index on a partition:</p>
<pre tabindex=0><code>ALTER INDEX table10_index ON table10 PARTITION (columnX='valueQ', columnY='valueR') REBUILD;
</code></pre>
</div>
</div>
<footer class="black-background static-bottom" style=padding:30px>
<div class=row>
<div class=col-3>
<a href=https://www.apache.org/>
<img src=https://hive.apache.org/images/asf_logo.png width=270 height=100 alt="Apache Software Foundation"></a>
</a>
</div>
<div class=col-9>
<p class=footer-text>Apache is a non-profit organization helping open-source
software projects released under the Apache
<a href=https://www.apache.org/licenses/>license</a>
and managed with
<a href=https://www.apache.org/foundation/how-it-works.html>
open governance</a> and
<a href=https://privacy.apache.org/policies/privacy-policy-public.html>
privacy policy</a>. See upcoming
<a href=https://www.apache.org/events/current-event>Apache Events</a>.
If you discover any
<a href=https://www.apache.org/security/>security</a> vulnerabilities, please
report them privately. Finally,
<a href=https://www.apache.org/foundation/sponsorship.html>thanks
</a> to the sponsors who
<a href=https://www.apache.org/foundation/contributing.html>
donate</a> to the Apache Foundation.
</p>
</div>
</div>
<div class="copyright row">
<a href=https://hive.apache.org style=color:grey>
The contents of this website are © 2023 Apache Software Foundation under the terms of the Apache License v2. Apache Hive and its logo are trademarks of the Apache Software Foundation.
</a>
</div>
</footer>
<script src=https://hive.apache.org/js/bootstrap.bundle.min.js></script>
</body>
</html>