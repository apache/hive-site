<!doctype html><html><!doctype html>
<html>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content>
<meta name=author content>
<title>Apache Hive : LanguageManual Select</title>
<link rel=icon href=/images/hive.svg sizes=any type=image/svg+xml>
<link rel=stylesheet href=https://hive.apache.org/css/hive-theme.css>
<link rel=stylesheet href=https://hive.apache.org/css/font-awesome.all.min.css>
<link rel=stylesheet href=https://hive.apache.org/css/bootstrap.min.css>
<link rel=stylesheet href=https://hive.apache.org/css/termynal.css>
<link rel=apple-touch-icon sizes=180x180 href=https://hive.apache.org/images/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=https://hive.apache.org/images/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=https://hive.apache.org/images/favicon-16x16.png>
<link rel=manifest href=https://hive.apache.org/images/site.webmanifest>
<link rel=mask-icon href=https://hive.apache.org/images/safari-pinned-tab.svg color=#5bbad5>
<meta name=msapplication-TileColor content="#da532c">
<meta name=theme-color content="#ffffff">
<script>var _paq=window._paq=window._paq||[];_paq.push(['disableCookies']),_paq.push(['trackPageView']),_paq.push(['enableLinkTracking']),function(){var b="https://analytics.apache.org/",c,a,d;_paq.push(['setTrackerUrl',b+'matomo.php']),_paq.push(['setSiteId','30']),c=document,a=c.createElement('script'),d=c.getElementsByTagName('script')[0],a.async=!0,a.src=b+'matomo.js',d.parentNode.insertBefore(a,d)}()</script>
</head>
<body>
<body>
<header>
<menu class=main-menu>
<nav class="navbar navbar-expand-lg navbar-dark">
<div class=container-fluid>
<div class=navbar-brand-wrapper>
<a href=https://hive.apache.org class=navbar-logo>
<img src=https://hive.apache.org/images/hive.svg width=50 height=30 alt="Apache Hive Logo">
</a>
<a class=navbar-brand href=https://hive.apache.org>Apache Hive</a>
</div>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span>
</button>
<div class="collapse navbar-collapse" id=navbarSupportedContent>
<ul class="navbar-nav me-auto">
<li class=nav-item>
<a class=nav-link href=https://hive.apache.org/general/downloads>
Releases
</a>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=/Document id=docsDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
Documentation
</a>
<ul class=dropdown-menu aria-labelledby=docsDropdown>
<li><a class=dropdown-item href=https://hive.apache.org/docs/latest/>Latest</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/docs/javadocs/>Javadocs</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/docs/latest/language/languagemanual>Language Manual</a></li>
</ul>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=/general id=generalDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
General
</a>
<ul class=dropdown-menu aria-labelledby=generalDropdown>
<li><a class=dropdown-item href=https://www.apache.org/licenses/LICENSE-2.0.html>License</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/general/privacypolicy/>Privacy Policy</a></li>
<li><a class=dropdown-item href=/general/poweredby/>Powered by</a></li>
</ul>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=# id=devDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
Development
</a>
<ul class=dropdown-menu aria-labelledby=devDropdown>
<li><a class=dropdown-item href=https://hive.apache.org/development/gettingstarted/>Getting Started</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/development/quickstart/>Quickstart with Docker</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/development/desingdocs/>Design Docs</a></li>
<li><a class=dropdown-item href=https://issues.apache.org/jira/projects/HIVE/issues>Hive JIRA</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/community/resources/hivedeveloperfaq>Hive Developer FAQ</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/development/versioncontrol/>Version Control</a></li>
</ul>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=# id=communityDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
Community
</a>
<ul class=dropdown-menu aria-labelledby=communityDropdown>
<li><a class=dropdown-item href=/community/becomingcommitter/>Becoming A Committer</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/community/resources/howtocontribute>How To Contribute</a></li>
<li><a class=dropdown-item href=/community/resources/>Resources</a></li>
<li><a class=dropdown-item href=/community/meetings/>Meetings</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/community/mailinglists/>Mailing Lists</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/community/issuetracking/>Issue Tracking</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/community/people/>People</a></li>
<li><hr class=dropdown-divider></li>
<li><a class=dropdown-item href=/community/bylaws/>By Laws</a></li>
<li><a class=dropdown-item href=/community/resources/howtorelease/>How To Release</a></li>
</ul>
</li>
<li class=nav-item>
<a class=nav-link href=https://hive.blog.apache.org/>
Blogs
</a>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=# id=asfDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
ASF
</a>
<ul class=dropdown-menu aria-labelledby=asfDropdown>
<li><a class=dropdown-item href=https://www.apache.org/foundation/contributing.html>Donations</a></li>
<li><a class=dropdown-item href=https://www.apache.org/foundation/sponsorship.html>Sponsorship</a></li>
<li><a class=dropdown-item href=https://www.apache.org/foundation/thanks.html>Thanks</a></li>
<li><a class=dropdown-item href=https://www.apache.org/>Website</a></li>
</ul>
</li>
</ul>
<div class=navbar-search>
<form action=/search method=get class=search-form>
<div class=search-input-group>
<input type=search name=q id=search-query placeholder=Search... class=search-input aria-label=Search>
<button type=submit class=search-button aria-label="Submit search">
<i class="fas fa-search"></i>
</button>
</div>
</form>
</div>
</div>
</div>
</nav>
</menu>
</header>
<div class=content>
<div class=docs-container>
<main class="docs-main docs-main-full">
<article class=docs-content>
<nav class=docs-breadcrumb>
<ol>
<li><a href=/><i class="fas fa-home"></i> Home</a></li>
<li><a href=/docs/>Documentation</a></li>
<li class=active>Apache Hive : LanguageManual Select</li>
</ol>
</nav>
<header class=docs-header>
<h1 class=docs-title>Apache Hive : LanguageManual Select</h1>
<div class=docs-meta>
<span class=docs-date>
<i class="fas fa-calendar-alt"></i>
Last updated: December 12, 2024
</span>
</div>
</header>
<div class=docs-toc>
<h4><i class="fas fa-list"></i> Table of Contents</h4>
<nav id=TableOfContents>
<ul>
<li><a href=#apache-hive--languagemanual-select>Apache Hive : LanguageManual Select</a>
<ul>
<li><a href=#select-syntax>Select Syntax</a>
<ul>
<li><a href=#where-clause>WHERE Clause</a></li>
<li><a href=#all-and-distinct-clauses>ALL and DISTINCT Clauses</a></li>
<li><a href=#partition-based-queries>Partition Based Queries</a></li>
<li><a href=#having-clause>HAVING Clause</a></li>
<li><a href=#limit-clause>LIMIT Clause</a></li>
<li><a href=#regex-column-specification>REGEX Column Specification</a></li>
<li><a href=#more-select-syntax>More Select Syntax</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</div>
<div class=docs-article>
<h1 id=apache-hive--languagemanual-select>Apache Hive : LanguageManual Select</h1>
<aside class=table-of-contents>
<nav id=TableOfContents>
<ul>
<li><a href=#apache-hive--languagemanual-select>Apache Hive : LanguageManual Select</a>
<ul>
<li><a href=#select-syntax>Select Syntax</a>
<ul>
<li><a href=#where-clause>WHERE Clause</a></li>
<li><a href=#all-and-distinct-clauses>ALL and DISTINCT Clauses</a></li>
<li><a href=#partition-based-queries>Partition Based Queries</a></li>
<li><a href=#having-clause>HAVING Clause</a></li>
<li><a href=#limit-clause>LIMIT Clause</a></li>
<li><a href=#regex-column-specification>REGEX Column Specification</a></li>
<li><a href=#more-select-syntax>More Select Syntax</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</aside>
<h2 id=select-syntax>Select Syntax</h2>
<pre tabindex=0><code>[WITH CommonTableExpression (, CommonTableExpression)*]    (Note: Only available starting with Hive 0.13.0)
SELECT [ALL | DISTINCT] select_expr, select_expr, ...
  FROM table_reference
  [WHERE where_condition]
  [GROUP BY col_list]
  [ORDER BY col_list]
  [CLUSTER BY col_list
    | [DISTRIBUTE BY col_list] [SORT BY col_list]
  ]
 [LIMIT [offset,] rows]

</code></pre><ul>
<li>A SELECT statement can be part of a <a href=https://hive.apache.org/docs/latest/language/languagemanual-union/>union</a> query or a <a href=https://hive.apache.org/docs/latest/language/languagemanual-subqueries/>subquery</a> of another query.</li>
<li><code>table_reference</code> indicates the input to the query. It can be a regular table, <a href=#a-view>a view</a>, a <a href=https://hive.apache.org/docs/latest/language/languagemanual-joins/>join construct</a> or a <a href=https://hive.apache.org/docs/latest/language/languagemanual-subqueries/>subquery</a>.</li>
<li>Table names and column names are case insensitive.
<ul>
<li>In Hive 0.12 and earlier, only alphanumeric and underscore characters are allowed in table and column names.</li>
<li>In Hive 0.13 and later, column names can contain any <a href=http://en.wikipedia.org/wiki/List_of_Unicode_characters>Unicode</a> character (see <a href=https://issues.apache.org/jira/browse/HIVE-6013>HIVE-6013</a>). Any column name that is specified within backticks (```) is treated literally. Within a backtick string, use double backticks (````) to represent a backtick character.</li>
<li>To revert to pre-0.13.0 behavior and restrict column names to alphanumeric and underscore characters, set the configuration property <code>[hive.support.quoted.identifiers](#hive-support-quoted-identifiers)</code> to <code>none</code>. In this configuration, backticked names are interpreted as regular expressions. For details, see <a href=https://issues.apache.org/jira/secure/attachment/12618321/QuotedIdentifier.html>Supporting Quoted Identifiers in Column Names</a> (attached to <a href=https://issues.apache.org/jira/browse/HIVE-6013>HIVE-6013</a>). Also see <a href=#regex-column-specification>REGEX Column Specification</a> below.</li>
</ul>
</li>
<li>Simple query. For example, the following query retrieves all columns and all rows from table t1.</li>
</ul>
<pre tabindex=0><code>SELECT * FROM t1 
</code></pre><p>Note</p>
<p>As of <a href=https://issues.apache.org/jira/browse/HIVE-4144>Hive 0.13.0</a>, FROM is optional (for example, <code>SELECT 1+1</code>).</p>
<ul>
<li>To get the current database (as of <a href=https://issues.apache.org/jira/browse/HIVE-4144>Hive 0.13.0</a>), use the <a href=#current_database---function>current_database() function</a>:</li>
</ul>
<pre tabindex=0><code>SELECT current_database()
</code></pre><ul>
<li>To specify a database, either qualify the table names with database names ("<code>db_name.table_name</code>" starting in <a href=https://issues.apache.org/jira/browse/HIVE-1517>Hive 0.7</a>) or issue the <a href=#use-statement>USE statement</a> before the query statement (starting in <a href=https://issues.apache.org/jira/browse/HIVE-675>Hive 0.6</a>).</li>
</ul>
<p>&ldquo;<code>db_name.table_name</code>&rdquo; allows a query to access tables in different databases.</p>
<p>USE sets the database for all subsequent HiveQL statements. Reissue it with the keyword &ldquo;<code>default</code>&rdquo; to reset to the default database.</p>
<pre tabindex=0><code>USE database_name;
SELECT query_specifications;
USE default;
</code></pre><h3 id=where-clause>WHERE Clause</h3>
<p>The WHERE condition is a <a href=https://hive.apache.org/docs/latest/language/languagemanual-types/>boolean</a> expression. For example, the following query returns only those sales records which have an amount greater than 10 from the US region. Hive supports a number of <a href=https://hive.apache.org/docs/latest/language/languagemanual-udf/>operators and UDFs</a> in the WHERE clause:</p>
<pre tabindex=0><code>SELECT * FROM sales WHERE amount &gt; 10 AND region = &quot;US&quot;

</code></pre><p>As of Hive 0.13 some types of <a href=https://hive.apache.org/docs/latest/language/languagemanual-subqueries/>subqueries</a> are supported in the WHERE clause.</p>
<h3 id=all-and-distinct-clauses>ALL and DISTINCT Clauses</h3>
<p>The ALL and DISTINCT options specify whether duplicate rows should be returned. If none of these options are given, the default is ALL (all matching rows are returned). DISTINCT specifies removal of duplicate rows from the result set. Note, Hive supports SELECT DISTINCT * starting in release 1.1.0 (<a href=https://issues.apache.org/jira/browse/HIVE-9194>HIVE-9194</a>).</p>
<pre tabindex=0><code>hive&gt; SELECT col1, col2 FROM t1
    1 3
    1 3
    1 4
    2 5
hive&gt; SELECT DISTINCT col1, col2 FROM t1
    1 3
    1 4
    2 5
hive&gt; SELECT DISTINCT col1 FROM t1
    1
    2

</code></pre><p>ALL and DISTINCT can also be used in a UNION clause – see <a href=#union-syntax>Union Syntax</a> for more information.</p>
<h3 id=partition-based-queries>Partition Based Queries</h3>
<p>In general, a SELECT query scans the entire table (other than for <a href=https://hive.apache.org/docs/latest/language/languagemanual-sampling/>sampling</a>). If a table created using the <a href=#partitioned-by>PARTITIONED BY</a> clause, a query can do <strong>partition pruning</strong> and scan only a fraction of the table relevant to the partitions specified by the query. Hive currently does partition pruning if the partition predicates are specified in the WHERE clause or the ON clause in a JOIN. For example, if table page_views is partitioned on column date, the following query retrieves rows for just days between 2008-03-01 and 2008-03-31.</p>
<pre tabindex=0><code>    SELECT page_views.*
    FROM page_views
    WHERE page_views.date &gt;= '2008-03-01' AND page_views.date &lt;= '2008-03-31'

</code></pre><p>If a table page_views is joined with another table dim_users, you can specify a range of partitions in the ON clause as follows:</p>
<pre tabindex=0><code>    SELECT page_views.*
    FROM page_views JOIN dim_users
      ON (page_views.user_id = dim_users.id AND page_views.date &gt;= '2008-03-01' AND page_views.date &lt;= '2008-03-31')

</code></pre><ul>
<li>See also <a href=https://hive.apache.org/docs/latest/language/partition-filter-syntax/>Partition Filter Syntax</a>.</li>
<li>See also <a href=https://hive.apache.org/docs/latest/language/languagemanual-groupby/>Group By</a>.</li>
<li>See also <a href=https://hive.apache.org/docs/latest/language/languagemanual-sortby/>Sort By / Cluster By / Distribute By / Order By</a>.</li>
</ul>
<h3 id=having-clause>HAVING Clause</h3>
<p>Hive added support for the HAVING clause in version 0.7.0. In older versions of Hive it is possible to achieve the same effect by using a subquery, e.g:</p>
<pre tabindex=0><code>SELECT col1 FROM t1 GROUP BY col1 HAVING SUM(col2) &gt; 10

</code></pre><p>can also be expressed as</p>
<pre tabindex=0><code>SELECT col1 FROM (SELECT col1, SUM(col2) AS col2sum FROM t1 GROUP BY col1) t2 WHERE t2.col2sum &gt; 10

</code></pre><h3 id=limit-clause>LIMIT Clause</h3>
<p>The LIMIT clause can be used to constrain the number of rows returned by the SELECT statement.</p>
<p>LIMIT takes one or two numeric arguments, which must both be non-negative integer constants.</p>
<p>The first argument specifies the offset of the first row to return (as of <a href=https://issues.apache.org/jira/browse/HIVE-11531>Hive 2.0.0</a>) and the second specifies the maximum number of rows to return.</p>
<p>When a single argument is given, it stands for the maximum number of rows and the offset defaults to 0.</p>
<p> </p>
<p>The following query returns 5 arbitrary customers</p>
<pre tabindex=0><code>SELECT * FROM customers LIMIT 5
</code></pre><p>The following query returns the first 5 customers to be created</p>
<pre tabindex=0><code>SELECT * FROM customers ORDER BY create_date LIMIT 5
</code></pre><p> </p>
<p>The following query returns the  3rd to the 7th customers to be created</p>
<pre tabindex=0><code>SELECT * FROM customers ORDER BY create_date LIMIT 2,5
</code></pre><h3 id=regex-column-specification>REGEX Column Specification</h3>
<p>A SELECT statement can take regex-based column specification in Hive releases prior to 0.13.0, or in 0.13.0 and later releases if the configuration property <code>[hive.support.quoted.identifiers](#hive-support-quoted-identifiers)</code> is set to <code>none</code>. </p>
<ul>
<li>We use Java regex syntax. Try <a href=http://www.fileformat.info/tool/regex.htm>http://www.fileformat.info/tool/regex.htm</a> for testing purposes.</li>
<li>The following query selects all columns except ds and hr.</li>
</ul>
<pre tabindex=0><code>SELECT `(ds|hr)?+.+` FROM sales

</code></pre><h3 id=more-select-syntax>More Select Syntax</h3>
<p>See the following documents for additional syntax and features of SELECT statements:</p>
<ul>
<li><a href=https://hive.apache.org/docs/latest/language/languagemanual-groupby/>GROUP BY</a></li>
<li><a href=https://hive.apache.org/docs/latest/language/languagemanual-sortby/>SORT/ORDER/CLUSTER/DISTRIBUTE BY</a></li>
<li><a href=https://hive.apache.org/docs/latest/language/languagemanual-joins/>JOIN</a>
<ul>
<li><a href=https://hive.apache.org/docs/latest/language/languagemanual-joins/>Hive Joins</a></li>
<li><a href=https://hive.apache.org/docs/latest/language/languagemanual-joinoptimization/>Join Optimization</a></li>
<li><a href=https://hive.apache.org/development/desingdocs/outerjoinbehavior/>Outer Join Behavior</a></li>
</ul>
</li>
<li><a href=https://hive.apache.org/docs/latest/language/languagemanual-union/>UNION</a></li>
<li><a href=https://hive.apache.org/docs/latest/language/languagemanual-sampling/>TABLESAMPLE</a></li>
<li><a href=https://hive.apache.org/docs/latest/language/languagemanual-subqueries/>Subqueries</a></li>
<li><a href=https://hive.apache.org/docs/latest/language/languagemanual-virtualcolumns/>Virtual Columns</a></li>
<li><a href=https://hive.apache.org/docs/latest/language/languagemanual-udf/>Operators and UDFs</a></li>
<li><a href=https://hive.apache.org/docs/latest/language/languagemanual-lateralview/>LATERAL VIEW</a></li>
<li><a href=https://hive.apache.org/docs/latest/language/languagemanual-windowingandanalytics/>Windowing, OVER, and Analytics</a></li>
<li><a href=https://hive.apache.org/docs/latest/language/common-table-expression/>Common Table Expressions</a></li>
</ul>
<p> </p>
<p> </p>
<p> </p>
</div>
<footer class=docs-footer>
<div class=docs-feedback>
<h4><i class="fas fa-comment"></i> Feedback</h4>
<p>Was this page helpful? Let us know how we can improve.</p>
<div class=docs-feedback-buttons>
<button class="btn btn-feedback btn-positive">
<i class="fas fa-thumbs-up"></i> Yes
</button>
<button class="btn btn-feedback btn-negative">
<i class="fas fa-thumbs-down"></i> No
</button>
</div>
</div>
<div class=docs-edit>
<a href=https://github.com/apache/hive-site/edit/main/content/docs/latest/language/languagemanual-select.md class="btn btn-outline">
<i class="fab fa-github"></i> Edit this page on GitHub
</a>
</div>
</footer>
</article>
<aside class=docs-toc-sidebar>
<div class=docs-toc-sticky>
<h4><i class="fas fa-list"></i> On this page</h4>
<nav id=TableOfContents>
<ul>
<li><a href=#apache-hive--languagemanual-select>Apache Hive : LanguageManual Select</a>
<ul>
<li><a href=#select-syntax>Select Syntax</a>
<ul>
<li><a href=#where-clause>WHERE Clause</a></li>
<li><a href=#all-and-distinct-clauses>ALL and DISTINCT Clauses</a></li>
<li><a href=#partition-based-queries>Partition Based Queries</a></li>
<li><a href=#having-clause>HAVING Clause</a></li>
<li><a href=#limit-clause>LIMIT Clause</a></li>
<li><a href=#regex-column-specification>REGEX Column Specification</a></li>
<li><a href=#more-select-syntax>More Select Syntax</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</div>
</aside>
</main>
</div>
</div>
<footer class="black-background static-bottom" style=padding:30px>
<div class=row>
<div class=col-3>
<a href=https://www.apache.org/>
<img src=https://hive.apache.org/images/asf_logo.png width=270 height=100 alt="Apache Software Foundation"></a>
</a>
</div>
<div class=col-9>
<p class=footer-text>Apache is a non-profit organization helping open-source
software projects released under the Apache
<a href=https://www.apache.org/licenses/>license</a>
and managed with
<a href=https://www.apache.org/foundation/how-it-works.html>
open governance</a> and
<a href=https://privacy.apache.org/policies/privacy-policy-public.html>
privacy policy</a>. See upcoming
<a href=https://www.apache.org/events/current-event>Apache Events</a>.
If you discover any
<a href=https://www.apache.org/security/>security</a> vulnerabilities, please
report them privately. Finally,
<a href=https://www.apache.org/foundation/sponsorship.html>thanks
</a> to the sponsors who
<a href=https://www.apache.org/foundation/contributing.html>
donate</a> to the Apache Foundation.
</p>
</div>
</div>
<div class="copyright row">
<a href=https://hive.apache.org style=color:grey>
The contents of this website are © 2023 Apache Software Foundation under the terms of the Apache License v2. Apache Hive and its logo are trademarks of the Apache Software Foundation.
</a>
</div>
</footer>
<script src=https://hive.apache.org/js/bootstrap.bundle.min.js></script>
</body>
</html>