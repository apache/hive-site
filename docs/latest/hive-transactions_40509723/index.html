<!doctype html><html><!doctype html>
<html>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content>
<meta name=author content>
<title>Apache Hive : Hive Transactions</title>
<link rel=icon href=/images/hive.svg sizes=any type=image/svg+xml>
<link rel=stylesheet href=https://hive.apache.org/css/hive-theme.css>
<link rel=stylesheet href=https://hive.apache.org/css/font-awesome.all.min.css>
<link rel=stylesheet href=https://hive.apache.org/css/bootstrap.min.css>
<link rel=stylesheet href=https://hive.apache.org/css/termynal.css>
<link rel=apple-touch-icon sizes=180x180 href=https://hive.apache.org/images/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=https://hive.apache.org/images/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=https://hive.apache.org/images/favicon-16x16.png>
<link rel=manifest href=https://hive.apache.org/images/site.webmanifest>
<link rel=mask-icon href=https://hive.apache.org/images/safari-pinned-tab.svg color=#5bbad5>
<meta name=msapplication-TileColor content="#da532c">
<meta name=theme-color content="#ffffff">
<script>var _paq=window._paq=window._paq||[];_paq.push(['disableCookies']),_paq.push(['trackPageView']),_paq.push(['enableLinkTracking']),function(){var b="https://analytics.apache.org/",c,a,d;_paq.push(['setTrackerUrl',b+'matomo.php']),_paq.push(['setSiteId','30']),c=document,a=c.createElement('script'),d=c.getElementsByTagName('script')[0],a.async=!0,a.src=b+'matomo.js',d.parentNode.insertBefore(a,d)}()</script>
</head>
<body>
<body>
<header>
<menu style=background:#000;margin:0>
<nav class="navbar navbar-expand-lg navbar-dark bg-black">
<div class=container-fluid>
<a href=https://hive.apache.org> <img src=https://hive.apache.org/images/hive.svg width=60 height=35 alt="Apache Software Foundation"></a>
<a class="header-text navbar-brand" href=https://hive.apache.org>Apache Hive</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span>
</button>
<div class="collapse navbar-collapse" id=navbarSupportedContent>
<ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item dropdown">
<a class=nav-link href=/general/downloads id=navbarDropdown role=button aria-expanded=false>
Releases
</a>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=/Document id=navbarDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
Documentation
</a>
<ul class=dropdown-menu aria-labelledby=navbarDropdown>
<li><a class=dropdown-item href=/docs/latest/>Latest</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/docs/javadocs/>Javadocs</a></li>
<li><a class=dropdown-item href=https://cwiki.apache.org/confluence/display/Hive/LanguageManual>Language Manual</a></li>
</ul>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=/general id=navbarDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
General
</a>
<ul class=dropdown-menu aria-labelledby=navbarDropdown>
<li><a class=dropdown-item href=https://www.apache.org/licenses/LICENSE-2.0.html>License</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/general/privacypolicy/>Privacy Policy</a></li>
</ul>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
Development
</a>
<ul class=dropdown-menu aria-labelledby=navbarDropdown>
<li><a class=dropdown-item href=https://hive.apache.org/development/gettingstarted/>Getting Started</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/development/quickstart/>Quickstart with Docker</a></li>
<li><a class=dropdown-item href=https://cwiki.apache.org/confluence/display/Hive/DesignDocs>Design Docs</a></li>
<li><a class=dropdown-item href=https://issues.apache.org/jira/projects/HIVE/issues>Hive JIRA</a></li>
<li><a class=dropdown-item href=https://cwiki.apache.org/confluence/display/Hive/HiveDeveloperFAQ>Hive Developer FAQ</a></li>
<li><a class=dropdown-item href=https://cwiki.apache.org/confluence/display/Hive/Hive+PreCommit+Patch+Testing>Precommit Patch Testing</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/development/versioncontrol/>Version Control</a></li>
</ul>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
Community
</a>
<ul class=dropdown-menu aria-labelledby=navbarDropdown>
<li><a class=dropdown-item href=/community/becomingcommitter/>Becoming A Committer</a></li>
<li><a class=dropdown-item href=https://cwiki.apache.org/confluence/display/Hive/HowToContribute>How To Contribute</a></li>
<li><a class=dropdown-item href=https://cwiki.apache.org/confluence/display/Hive/Home#Home-ResourcesforContributors>Resources for Contributors</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/community/mailinglists/>Mailing Lists</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/community/issuetracking/>Issue Tracking</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/community/people/>People</a></li>
<li>
<hr class=dropdown-divider>
</li>
<li><a class=dropdown-item href=/community/bylaws/>By Laws</a></li>
<li><a class=dropdown-item href=https://cwiki.apache.org/confluence/display/Hive/HowToRelease>How To Release</a></li>
</ul>
</li>
<li class="nav-item dropdown">
<a class=nav-link href=https://hive.blog.apache.org/ id=navbarDropdown role=button aria-expanded=false>
Blogs
</a>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
ASF
</a>
<ul class=dropdown-menu aria-labelledby=navbarDropdown>
<li><a class=dropdown-item href=https://www.apache.org/foundation/contributing.html>Donations</a></li>
<li><a class=dropdown-item href=https://www.apache.org/foundation/sponsorship.html>Sponsorship</a></li>
<li><a class=dropdown-item href=https://www.apache.org/foundation/thanks.html>Thanks</a></li>
<li><a class=dropdown-item href=https://www.apache.org/>Website</a></li>
</ul>
</li>
<li>
<form action=/search method=get class=search-bar>
<input type=search name=q id=search-query placeholder=Search... class=search-input>
<button type=submit class=search-button>Search</button>
</form>
</li>
</ul>
</div>
</div>
</nav>
</menu>
</header>
<div class=content>
<div class=docs>
<h1 id=apache-hive--hive-transactions>Apache Hive : Hive Transactions</h1>
<h1 id=acid-and-transactions-in-hive>ACID and Transactions in Hive</h1>
<ul>
<li><a href=#acid-and-transactions-in-hive>ACID and Transactions in Hive</a>
<ul>
<li><a href=#what-is-acid-and-why-should-you-use-it>What is ACID and why should you use it?</a></li>
<li><a href=#limitations>Limitations</a></li>
<li><a href=#streaming-apis>Streaming APIs</a></li>
<li><a href=#grammar-changes>Grammar Changes</a></li>
<li><a href=#basic-design>Basic Design</a>
<ul>
<li><a href=#base-and-delta-directories>Base and Delta Directories</a></li>
<li><a href=#compactor>Compactor</a>
<ul>
<li><a href=#delta-file-compaction>Delta File Compaction</a></li>
<li><a href=#initiator>Initiator</a></li>
<li><a href=#worker>Worker</a></li>
<li><a href=#cleaner>Cleaner</a></li>
<li><a href=#acidhousekeeperservice>AcidHouseKeeperService</a></li>
<li><a href=#show-compactions>SHOW COMPACTIONS</a></li>
</ul>
</li>
<li><a href=#transactionlock-manager>Transaction/Lock Manager</a></li>
</ul>
</li>
<li><a href=#configuration>Configuration</a>
<ul>
<li><a href=#new-configuration-parameters-for-transactions>New Configuration Parameters for Transactions</a></li>
<li><a href=#configuration-values-to-set-for-insert,-update,-delete>Configuration Values to Set for INSERT, UPDATE, DELETE</a></li>
<li><a href=#configuration-values-to-set-for-compaction>Configuration Values to Set for Compaction</a></li>
<li><a href=#compaction-pooling>Compaction pooling</a></li>
</ul>
</li>
<li><a href=#table-properties>Table Properties</a></li>
</ul>
</li>
<li><a href=#talks-and-presentations>Talks and Presentations</a></li>
</ul>
<p>Hive 3 Warning</p>
<p>Any transactional tables created by a Hive version prior to Hive 3 require Major Compaction to be run on every partition before upgrading to 3.0.  More precisely, any partition which has had any update/delete/merge statements executed on it since the last Major Compaction, has to undergo another Major Compaction.  No more update/delete/merge may happen on this partition until after Hive is upgraded to Hive 3.</p>
<h2 id=what-is-acid-and-why-should-you-use-it>What is ACID and why should you use it?</h2>
<p>ACID stands for four traits of database transactions:  Atomicity (an operation either succeeds completely or fails, it does not leave partial data), Consistency (once an application performs an operation the results of that operation are visible to it in every subsequent operation), <a href=https://en.wikipedia.org/wiki/Isolation_(database_systems)>Isolation</a> (an incomplete operation by one user does not cause unexpected side effects for other users), and Durability (once an operation is complete it will be preserved even in the face of machine or system failure).  These traits have long been expected of database systems as part of their transaction functionality.  </p>
<p>Up until Hive 0.13, atomicity, consistency, and durability were provided at the partition level.  Isolation could be provided by turning on one of the available locking mechanisms (<a href=http://zookeeper.apache.org/>ZooKeeper</a> or in memory).  With the addition of transactions in <a href=https://issues.apache.org/jira/browse/HIVE-5317>Hive 0.13</a> it is now possible to provide full ACID semantics at the row level, so that one application can add rows while another reads from the same partition without interfering with each other.</p>
<p>Transactions with ACID semantics have been added to Hive to address the following use cases:</p>
<ol>
<li>Streaming ingest of data.  Many users have tools such as <a href=http://flume.apache.org/>Apache Flume</a>, <a href=https://storm.incubator.apache.org/>Apache Storm</a>, or <a href=http://kafka.apache.org/>Apache Kafka</a> that they use to stream data into their Hadoop cluster.  While these tools can write data at rates of hundreds or more rows per second, Hive can only add partitions every fifteen minutes to an hour.  Adding partitions more often leads quickly to an overwhelming number of partitions in the table.  These tools could stream data into existing partitions, but this would cause readers to get dirty reads (that is, they would see data written after they had started their queries) and leave many small files in their directories that would put pressure on the NameNode.  With this new functionality this use case will be supported while allowing readers to get a consistent view of the data and avoiding too many files.</li>
<li>Slow changing dimensions.  In a typical star schema data warehouse, dimensions tables change slowly over time.  For example, a retailer will open new stores, which need to be added to the stores table, or an existing store may change its square footage or some other tracked characteristic.  These changes lead to inserts of individual records or updates of records (depending on the strategy chosen).  Starting with 0.14, Hive is able to support this.</li>
<li>Data restatement.  Sometimes collected data is found to be incorrect and needs correction.  Or the first instance of the data may be an approximation (90% of servers reporting) with the full data provided later.  Or business rules may require that certain transactions be restated due to subsequent transactions (e.g., after making a purchase a customer may purchase a membership and thus be entitled to discount prices, including on the previous purchase).  Or a user may be contractually required to remove their customer’s data upon termination of their relationship.  Starting with Hive 0.14 these use cases can be supported via <em><a href=https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML>INSERT</a>, <a href=https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML#LanguageManualDML-Update>UPDATE</a></em>, and <em><a href=https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML#LanguageManualDML-Delete>DELETE</a></em>.</li>
<li>Bulk updates using <a href=https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML#LanguageManualDML-Merge>SQL MERGE</a> statement.</li>
</ol>
<h2 id=limitations>Limitations</h2>
<ul>
<li><em>BEGIN</em>, <em>COMMIT</em>, and <em>ROLLBACK</em> are not yet supported.  All language operations are auto-commit.  The plan is to support these in a future release.</li>
<li>Only <a href=https://hive.apache.org/docs/latest/languagemanual-orc_31818911/>ORC file format</a> is supported in this first release.  The feature has been built such that transactions can be used by any storage format that can determine how updates or deletes apply to base records (basically, that has an explicit or implicit row id), but so far the integration work has only been done for ORC.</li>
<li>By default transactions are configured to be off.  See the <a href=#configuration>Configuration</a> section below for a discussion of which values need to be set to configure it.</li>
<li>Tables must be <a href=https://hive.apache.org/docs/latest/languagemanual-ddl-bucketedtables_27362035/>bucketed</a> to make use of these features.  Tables in the same system not using transactions and ACID do not need to be bucketed. External tables cannot be made ACID tables since the changes on external tables are beyond the control of the compactor (<a href=https://issues.apache.org/jira/browse/HIVE-13175>HIVE-13175</a>).</li>
<li>Reading/writing to an ACID table from a non-ACID session is not allowed. In other words, the Hive transaction manager must be set to org.apache.hadoop.hive.ql.lockmgr.DbTxnManager in order to work with ACID tables.</li>
<li>At this time only snapshot level isolation is supported.  When a given query starts it will be provided with a consistent snapshot of the data.  There is no support for dirty read, read committed, repeatable read, or serializable.  With the introduction of BEGIN the intention is to support snapshot isolation for the duration of transaction rather than just a single query.  Other isolation levels may be added depending on user requests.</li>
<li>The existing ZooKeeper and in-memory lock managers are not compatible with transactions.  There is no intention to address this issue.  See <a href=#basic-design>Basic Design</a> below for a discussion of how locks are stored for transactions.</li>
<li><del>Schema changes using ALTER TABLE is NOT supported for ACID tables. <a href=https://issues.apache.org/jira/browse/HIVE-11421>HIVE-11421</a> is tracking it.</del>  Fixed in 1.3.0/2.0.0.</li>
<li>Using Oracle as the Metastore DB and &ldquo;datanucleus.connectionPoolingType=BONECP&rdquo; may generate intermittent &ldquo;No such lock..&rdquo; and &ldquo;No such transaction&mldr;&rdquo; errors.  Setting &ldquo;datanucleus.connectionPoolingType=DBCP&rdquo; is recommended in this case.</li>
<li><a href=https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML#LanguageManualDML-Loadingfilesintotables>LOAD DATA&mldr;</a> statement is not supported with transactional tables.  (This was not properly enforced until <a href=https://issues.apache.org/jira/browse/HIVE-16732>HIVE-16732</a>)</li>
</ul>
<h2 id=streaming-apis>Streaming APIs</h2>
<p>Hive offers APIs for streaming data ingest and streaming mutation:</p>
<ul>
<li><a href=https://hive.apache.org/docs/latest/streaming-data-ingest_40509746/>Hive HCatalog Streaming API</a></li>
<li><a href=https://cwiki.apache.org/confluence/display/Hive/Streaming+Data+Ingest+V2>Hive Streaming API</a> (Since Hive 3)</li>
<li><a href=https://hive.apache.org/docs/latest/hcatalog-streaming-mutation-api_61337025/>HCatalog Streaming Mutation API</a> (available in Hive 2.0.0 and later)</li>
</ul>
<p>A comparison of these two APIs is available in the <a href=#background>Background</a> section of the Streaming Mutation document.</p>
<h2 id=grammar-changes>Grammar Changes</h2>
<p><em>INSERT&mldr;VALUES, UPDATE</em>, and <em>DELETE</em> have been added to the SQL grammar, starting in <a href=https://issues.apache.org/jira/browse/HIVE-5317>Hive 0.14</a>.  See <a href=https://hive.apache.org/docs/latest/languagemanual-dml_27362036/>LanguageManual DML</a> for details.</p>
<p>Several new commands have been added to Hive&rsquo;s DDL in support of ACID and transactions, plus some existing DDL has been modified.  </p>
<p>A new command <em>SHOW TRANSACTIONS</em> has been added, see <a href=#show-transactions>Show Transactions</a> for details.</p>
<p>A new command <em>SHOW COMPACTIONS</em> has been added, see <a href=#show-compactions>Show Compactions</a> for details.</p>
<p>The <em>SHOW LOCKS</em> command has been altered to provide information about the new locks associated with transactions.  If you are using the ZooKeeper or in-memory lock managers you will notice no difference in the output of this command.  See <a href=#show-locks>Show Locks</a> for details.</p>
<p>A new option has been added to <em>ALTER TABLE</em> to request a compaction of a table or partition.  In general users do not need to request compactions, as the system will detect the need for them and initiate the compaction.  However, if <a href=#compaction-is-turned-off>compaction is turned off</a> for a table or a user wants to compact the table at a time the system would not choose to, <em>ALTER TABLE</em> can be used to initiate the compaction.  See <a href=#alter-table/partition-compact>Alter Table/Partition Compact</a> for details.  This will enqueue a request for compaction and return.  To watch the progress of the compaction the user can use <em>SHOW COMPACTIONS</em>.</p>
<p>A new command <em>ABORT TRANSACTIONS</em> has been added, see <a href=https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-AbortTransactions>Abort Transactions</a> for details.</p>
<h2 id=basic-design>Basic Design</h2>
<p>HDFS does not support in-place changes to files.  It also does not offer read consistency in the face of writers appending to files being read by a user.  In order to provide these features on top of HDFS we have followed the standard approach used in other data warehousing tools.  Data for the table or partition is stored in a set of base files.  New records, updates, and deletes are stored in delta files.  A new set of delta files is created for each transaction (or in the case of streaming agents such as Flume or Storm, each batch of transactions) that alters a table or partition.  At read time the reader merges the base and delta files, applying any updates and deletes as it reads.</p>
<h3 id=base-and-delta-directories>Base and Delta Directories</h3>
<p>Previously all files for a partition (or a table if the table is not partitioned) lived in a single directory.  With these changes, any partitions (or tables) written with an ACID aware writer will have a directory for the base files and a directory for each set of delta files.  Here is what this may look like for an unpartitioned table &ldquo;t&rdquo;:</p>
<p><strong>Filesystem Layout for Table &ldquo;t&rdquo;</strong></p>
<pre tabindex=0><code>hive&gt; dfs -ls -R /user/hive/warehouse/t;
drwxr-xr-x   - ekoifman staff          0 2016-06-09 17:03 /user/hive/warehouse/t/base_0000022
-rw-r--r--   1 ekoifman staff        602 2016-06-09 17:03 /user/hive/warehouse/t/base_0000022/bucket_00000
drwxr-xr-x   - ekoifman staff          0 2016-06-09 17:06 /user/hive/warehouse/t/delta_0000023_0000023_0000
-rw-r--r--   1 ekoifman staff        611 2016-06-09 17:06 /user/hive/warehouse/t/delta_0000023_0000023_0000/bucket_00000
drwxr-xr-x   - ekoifman staff          0 2016-06-09 17:07 /user/hive/warehouse/t/delta_0000024_0000024_0000
-rw-r--r--   1 ekoifman staff        610 2016-06-09 17:07 /user/hive/warehouse/t/delta_0000024_0000024_0000/bucket_00000
</code></pre><h3 id=compactor>Compactor</h3>
<p>Compactor is a set of background processes running inside the Metastore to support ACID system.  It consists of Initiator, Worker, Cleaner, AcidHouseKeeperService and a few others.</p>
<h4 id=delta-file-compaction>Delta File Compaction</h4>
<p>As operations modify the table more and more delta files are created and need to be compacted to maintain adequate performance.  There are three types of compactions, minor, major and rebalance.</p>
<ul>
<li>Minor compaction takes a set of existing delta files and rewrites them to a single delta file per bucket.</li>
<li>Major compaction takes one or more delta files and the base file for the bucket and rewrites them into a new base file per bucket.  Major compaction is more expensive but is more effective.</li>
<li>More information about rebalance compaction can be found here: <a href=https://hive.apache.org/docs/latest/rebalance-compaction_240884502/>Rebalance compaction</a></li>
</ul>
<p>All compactions are done in the background. Minor and major compactions do not prevent concurrent reads and writes of the data. Rebalance compaction uses exclusive write lock, therefore it prevents concurrent writes. After a compaction the system waits until all readers of the old files have finished and then removes the old files.</p>
<h4 id=initiator>Initiator</h4>
<p>This module is responsible for discovering which tables or partitions are due for compaction.  This should be enabled in a Metastore using <a href=#hive-compactor-initiator-on>hive.compactor.initiator.on</a>.  There are several properties of the form *.threshold in &ldquo;New Configuration Parameters for Transactions&rdquo; table below that control when a compaction task is created and which type of compaction is performed.  Each compaction task handles 1 partition (or whole table if the table is unpartitioned).  If the number of consecutive compaction failures for a given partition exceeds hive.compactor.initiator.failed.compacts.threshold, automatic compaction scheduling will stop for this partition.  See Configuration Parameters table for more info.</p>
<h4 id=worker>Worker</h4>
<p>Each Worker handles a single compaction task.  A compaction is a MapReduce job with name in the following form: -compactor-...  Each worker submits the job to the cluster (via <a href=#hive-compactor-job-queue>hive.compactor.job.queue</a> if defined) and waits for the job to finish.  <a href=#hive-compactor-worker-threads>hive.compactor.worker.threads</a> determines the number of Workers in each Metastore.  The total number of Workers in the Hive Warehouse determines the maximum number of concurrent compactions.</p>
<h4 id=cleaner>Cleaner</h4>
<p>This process is a process that deletes delta files after compaction and after it determines that they are no longer needed.</p>
<h4 id=acidhousekeeperservice>AcidHouseKeeperService</h4>
<p>This process looks for transactions that have not heartbeated in <a href=#hive-txn-timeout>hive.txn.timeout</a> time and aborts them.  The system assumes that a client that initiated a transaction stopped heartbeating crashed and the resources it locked should be released.</p>
<h4 id=show-compactions>SHOW COMPACTIONS</h4>
<p>This commands displays information about currently running compaction and recent history (configurable retention period) of compactions.  This history display is available since <a href=https://issues.apache.org/jira/browse/HIVE-12353>HIVE-12353</a>.</p>
<p>Also see <a href=#languagemanual-ddl#showcompactions>LanguageManual DDL#ShowCompactions</a> for more information on the output of this command and <a href=#newconfigurationparametersfortransactions>NewConfigurationParametersforTransactions</a>/Compaction History for configuration properties affecting the output of this command.  The system retains the last N entries of each type: failed, succeeded, attempted (where N is configurable for each type).</p>
<h3 id=transactionlock-manager>Transaction/Lock Manager</h3>
<p>A new logical entity called &ldquo;transaction manager&rdquo;  was added which incorporated previous notion of &ldquo;database/table/partition lock manager&rdquo; (hive.lock.manager with default of org.apache.hadoop.hive.ql.lockmgr.zookeeper.ZooKeeperHiveLockManager). The transaction manager is now additionally responsible for managing of transactions locks. The default DummyTxnManager emulates behavior of old Hive versions: has no transactions and uses hive.lock.manager property to create lock manager for tables, partitions and databases. A newly added DbTxnManager manages all locks/transactions in Hive metastore with DbLockManager (transactions and locks are durable in the face of server failure). This means that previous behavior of locking in ZooKeeper is not present anymore when transactions are enabled. To avoid clients dying and leaving transaction or locks dangling, a heartbeat is sent from lock holders and transaction initiators to the metastore on a regular basis.  If a heartbeat is not received in the configured amount of time, the lock or transaction will be aborted.</p>
<p>As of <a href=https://issues.apache.org/jira/browse/HIVE-12529>Hive 1.3.0</a>, the length of time that the DbLockManger will continue to try to acquire locks can be controlled via [hive.lock.numretires](http://Configuration Properties#hive.lock.numretires) and [hive.lock.sleep.between.retries](http://Configuration Properties#hive.lock.sleep.between.retries).  When the DbLockManager cannot acquire a lock (due to existence of a competing lock), it will back off and try again after a certain time period.  In order to support short running queries and not overwhelm the metastore at the same time, the DbLockManager will double the wait time after each retry.  The initial back off time is 100ms and is capped by hive.lock.sleep.between.retries.  hive.lock.numretries is the total number of times it will retry a given lock request.  Thus the total time that the call to acquire locks will block (given values of 100 retries and 60s sleep time) is (100ms + 200ms + 400ms + &mldr; + 51200ms + 60s + 60s + &mldr; + 60s) = 91m:42s:300ms.</p>
<p>More <a href=https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-ShowLocks>details</a> on locks used by this Lock Manager.</p>
<p>Note that the lock manager used by DbTxnManager will acquire locks on all tables, even those without &ldquo;transactional=true&rdquo; property.  By default, Insert operation into a non-transactional table will acquire an exclusive lock and thus block other inserts and reads.  While technically correct, this is a departure from how Hive traditionally worked (i.e. w/o a lock manger).  For backwards compatibility, [hive.txn.strict.locking.mode](http://Configuration Properties#hive.txn.strict.locking.mode) (see table below) is provided which will make this lock manager acquire shared locks on insert operations on non-transactional tables.  This restores previous semantics while still providing the benefit of a lock manager such as preventing table drop while it is being read.  Note that for transactional tables, insert always acquires share locks since these tables implement MVCC architecture at the storage layer and are able to provide strong read consistency (Snapshot Isolation) even in presence of concurrent modification operations.</p>
<h2 id=configuration>Configuration</h2>
<p>Minimally, these configuration parameters must be set appropriately to turn on transaction support in Hive:</p>
<p>Client Side</p>
<ul>
<li><a href=#hive-support-concurrency>hive.support.concurrency</a> – true</li>
<li><a href=#hive-enforce-bucketing>hive.enforce.bucketing</a> – true (Not required as of <a href=https://issues.apache.org/jira/browse/HIVE-12331>Hive 2.0</a>)</li>
<li><a href=#hive-exec-dynamic-partition-mode>hive.exec.dynamic.partition.mode</a> – nonstrict</li>
<li><a href=#hive-txn-manager>hive.txn.manager</a> – org.apache.hadoop.hive.ql.lockmgr.DbTxnManager</li>
</ul>
<p>Server Side (Metastore)</p>
<ul>
<li><a href=#hive-compactor-initiator-on>hive.compactor.initiator.on</a> – true (See table below for more details)</li>
<li><a href=#hive-compactor-cleaner-on>hive.compactor.cleaner.on</a> – true (See table below for more details)</li>
<li><a href=#hive-compactor-worker-threads>hive.compactor.worker.threads</a> – a positive number on at least one instance of the Thrift metastore service</li>
</ul>
<p>The following sections list all of the configuration parameters that affect Hive transactions and compaction.  Also see <a href=#limitations>Limitations</a> above and <a href=#table-properties>Table Properties</a> below.</p>
<h3 id=new-configuration-parameters-for-transactions>New Configuration Parameters for Transactions</h3>
<p>A number of new configuration parameters have been added to the system to support transactions.</p>
<table>
<thead>
<tr>
<th><strong>Configuration key</strong></th>
<th><strong>Values</strong></th>
<th><strong>Location</strong></th>
<th><strong>Notes</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=#hive-txn-manager>hive.txn.manager</a> </td>
<td><em>Default:</em> org.apache.hadoop.hive.ql.lockmgr.DummyTxnManager<em>Value required for transactions:</em> org.apache.hadoop.hive.ql.lockmgr.DbTxnManager</td>
<td>Client/HiveServer2</td>
<td>DummyTxnManager replicates pre Hive-0.13 behavior and provides no transactions.</td>
</tr>
<tr>
<td><a href=#hive-txn-strict-locking-mode>hive.txn.strict.locking.mode</a></td>
<td><em>Default:</em> true</td>
<td>Client/ HiveServer2</td>
<td>In strict mode non-ACID resources use standard R/W lock semantics, e.g. INSERT will acquire exclusive lock. In non-strict mode, for non-ACID resources, INSERT will only acquire shared lock, which allows two concurrent writes to the same partition but still lets lock manager prevent DROP TABLE etc. when the table is being written to (as of <a href=https://issues.apache.org/jira/browse/HIVE-15774>Hive 2.2.0</a>).</td>
</tr>
<tr>
<td><a href=#hive-txn-timeout>hive.txn.timeout</a> </td>
<td><em>Default:</em> 300</td>
<td>Client/HiveServer2/Metastore </td>
<td>Time after which transactions are declared aborted if the client has not sent a heartbeat, in seconds. It&rsquo;s critical that this property has the same value for all components/services.5</td>
</tr>
<tr>
<td><a href=https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.txn.heartbeat.threadpool.size>hive.txn.heartbeat.threadpool.size</a></td>
<td><em>Default:</em> 5</td>
<td>Client/HiveServer2</td>
<td>The number of threads to use for heartbeating (as of <a href=https://issues.apache.org/jira/browse/HIVE-12366>Hive 1.3.0 and 2.0.0</a>).</td>
</tr>
<tr>
<td><a href=#hive-timedout-txn-reaper-start>hive.timedout.txn.reaper.start</a></td>
<td><em>Default:</em> 100s</td>
<td>Metastore</td>
<td>Time delay of first reaper (the process which aborts timed-out transactions) run after the metastore starts (as of <a href=https://issues.apache.org/jira/browse/HIVE-11317>Hive 1.3.0</a>). Controls AcidHouseKeeperServcie above.</td>
</tr>
<tr>
<td><a href=#hive-timedout-txn-reaper-interval>hive.timedout.txn.reaper.interval</a></td>
<td><em>Default:</em> 180s</td>
<td>Metastore</td>
<td>Time interval describing how often the reaper (the process which aborts timed-out transactions) runs (as of <a href=https://issues.apache.org/jira/browse/HIVE-11317>Hive 1.3.0</a>). Controls AcidHouseKeeperServcie above.</td>
</tr>
<tr>
<td><a href=#hive-txn-max-open-batch>hive.txn.max.open.batch</a></td>
<td><em>Default:</em> 1000</td>
<td>Client</td>
<td>Maximum number of transactions that can be fetched in one call to open_txns().1</td>
</tr>
<tr>
<td><a href=#hive-max-open-txns>hive.max.open.txns</a></td>
<td><em>Default:</em> 100000</td>
<td>HiveServer2/ Metastore</td>
<td>Maximum number of open transactions. If current open transactions reach this limit, future open transaction requests will be rejected, until the number goes below the limit. (As of <a href=https://issues.apache.org/jira/browse/HIVE-13249>Hive 1.3.0 and 2.1.0</a>.)</td>
</tr>
<tr>
<td><a href=#hive-count-open-txns-interval>hive.count.open.txns.interval</a></td>
<td><em>Default:</em> 1s</td>
<td>HiveServer2/ Metastore</td>
<td>Time in seconds between checks to count open transactions (as of <a href=https://issues.apache.org/jira/browse/HIVE-13249>Hive 1.3.0 and 2.1.0</a>).</td>
</tr>
<tr>
<td><a href=#hive-txn-retryable-sqlex-regex>hive.txn.retryable.sqlex.regex</a></td>
<td><em>Default:</em> "" (empty string)</td>
<td>HiveServer2/ Metastore</td>
<td>Comma separated list of regular expression patterns for SQL state, error code, and error message of retryable SQLExceptions, that&rsquo;s suitable for the Hive metastore database (as of <a href=https://issues.apache.org/jira/browse/HIVE-12637>Hive 1.3.0 and 2.1.0</a>).For an example, see <a href=#configuration-properties>Configuration Properties</a>.</td>
</tr>
<tr>
<td><a href=#hive-compactor-initiator-on>hive.compactor.initiator.on</a></td>
<td><em>Default:</em> false<em>Value required for transactions:</em> true (for exactly one instance of the Thrift metastore service)</td>
<td>Metastore</td>
<td>Whether to run the initiator thread on this metastore instance. Prior to <a href=https://issues.apache.org/jira/browse/HIVE-11388>Hive 1.3.0</a> it&rsquo;s critical that this is enabled on exactly one standalone metastore service instance (not enforced yet).As of <a href=https://issues.apache.org/jira/browse/HIVE-11388>Hive 1.3.0</a> this property may be enabled on any number of standalone metastore instances.</td>
</tr>
<tr>
<td><a href=#hive-compactor-cleaner-on>hive.compactor.cleaner.on</a></td>
<td><em>Default:</em> false<em>Value required for transactions:</em> true (for exactly one instance of the Thrift metastore service)</td>
<td>Metastore</td>
<td>Whether to run the cleaner thread on this metastore instance. Before <strong>Hive 4.0.0</strong> Cleaner thread can be started/stopped with config hive.compactor.initiator.on. This config helps to enable/disable initiator/cleaner threads independently</td>
</tr>
<tr>
<td><a href=#hive-compactor-worker-threads>hive.compactor.worker.threads</a></td>
<td><em>Default:</em> 0<em>Value required for transactions:</em> > 0 on at least one instance of the Thrift metastore service</td>
<td>Metastore</td>
<td>How many compactor worker threads to run on this metastore instance.2</td>
</tr>
<tr>
<td><a href=#hive-compactor-worker-timeout>hive.compactor.worker.timeout</a></td>
<td><em>Default:</em> 86400</td>
<td>Metastore</td>
<td>Time in seconds after which a compaction job will be declared failed and the compaction re-queued.</td>
</tr>
<tr>
<td><a href=#hive-compactor-cleaner-run-interval>hive.compactor.cleaner.run.interval</a></td>
<td><em>Default</em>: 5000</td>
<td>Metastore</td>
<td>Time in milliseconds between runs of the cleaner thread. (<a href=https://issues.apache.org/jira/browse/HIVE-8258>Hive 0.14.0</a> and later.)</td>
</tr>
<tr>
<td><a href=#hive-compactor-check-interval>hive.compactor.check.interval</a></td>
<td><em>Default:</em> 300</td>
<td>Metastore</td>
<td>Time in seconds between checks to see if any tables or partitions need to be compacted.3</td>
</tr>
<tr>
<td><a href=#hive-compactor-delta-num-threshold>hive.compactor.delta.num.threshold</a></td>
<td><em>Default:</em> 10</td>
<td>Metastore</td>
<td>Number of delta directories in a table or partition that will trigger a minor compaction.</td>
</tr>
<tr>
<td><a href=#hive-compactor-delta-pct-threshold>hive.compactor.delta.pct.threshold</a></td>
<td><em>Default:</em> 0.1</td>
<td>Metastore</td>
<td>Percentage (fractional) size of the delta files relative to the base that will trigger a major compaction. 1 = 100%, so the default 0.1 = 10%.</td>
</tr>
<tr>
<td><a href=#hive-compactor-abortedtxn-threshold>hive.compactor.abortedtxn.threshold</a></td>
<td><em>Default:</em> 1000</td>
<td>Metastore</td>
<td>Number of aborted transactions involving a given table or partition that will trigger a major compaction.</td>
</tr>
<tr>
<td><a href=#hive-compactor-aborted-txn-time-threshold>hive.compactor.aborted.txn.time.threshold</a></td>
<td><em>Default</em>: 12h</td>
<td>Metastore</td>
<td>Age of table/partition&rsquo;s oldest aborted transaction when compaction will be triggered. Default time unit is: hours. Set to a negative number to disable.</td>
</tr>
<tr>
<td><a href=#hive-compactor-max-num-delta>hive.compactor.max.num.delta</a></td>
<td>Default: 500</td>
<td>Metastore</td>
<td>Maximum number of delta files that the compactor will attempt to handle in a single job (as of <a href=https://issues.apache.org/jira/browse/HIVE-11540>Hive 1.3.0</a>).4</td>
</tr>
<tr>
<td><a href=#hive-compactor-job-queue>hive.compactor.job.queue</a></td>
<td><em>Default</em>: "" (empty string)</td>
<td> Metastore</td>
<td> Used to specify name of Hadoop queue to which Compaction jobs will be submitted. Set to empty string to let Hadoop choose the queue (as of <a href=https://issues.apache.org/jira/browse/HIVE-11997>Hive 1.3.0</a>).</td>
</tr>
<tr>
<td>Compaction History</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>hive.compactor.history.retention.succeeded</td>
<td><em>Default: 3</em></td>
<td>Metastore</td>
<td>Number of successful compaction entries to retain in history (per partition).</td>
</tr>
<tr>
<td>hive.compactor.history.retention.failed</td>
<td><em>Default: 3</em></td>
<td>Metastore</td>
<td>Number of failed compaction entries to retain in history (per partition).</td>
</tr>
<tr>
<td>hive.compactor.history.retention.attempted</td>
<td><em>Default: 2</em></td>
<td>Metastore</td>
<td>Number of attempted compaction entries to retain in history (per partition).</td>
</tr>
<tr>
<td>hive.compactor.initiator.failed.compacts.threshold</td>
<td><em>Default: 2</em></td>
<td>Metastore</td>
<td>Number of of consecutive failed compactions for a given partition after which the Initiator will stop attempting to schedule compactions automatically. It is still possible to use <a href=https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-AlterTable/PartitionCompact>ALTER TABLE</a> to initiate compaction. Once a manually initiated compaction succeeds auto initiated compactions will resume. Note that this must be less than hive.compactor.history.retention.failed.</td>
</tr>
<tr>
<td>hive.compactor.history.reaper.interval</td>
<td><em>Default: 2m</em></td>
<td>Metastore</td>
<td>Controls how often the process to purge historical record of compactions runs.</td>
</tr>
</tbody>
</table>
<ol>
<li>
<p>hive.txn.max.open.batch controls how many transactions streaming agents such as Flume or Storm open simultaneously.  The streaming agent then writes that number of entries into a single file (per Flume agent or Storm bolt).  Thus increasing this value decreases the number of delta files created by streaming agents.  But it also increases the number of open transactions that Hive has to track at any given time, which may negatively affect read performance.</p>
</li>
<li>
<p>Worker threads spawn MapReduce jobs to do compactions.  They do not do the compactions themselves.  Increasing the number of worker threads will decrease the time it takes tables or partitions to be compacted once they are determined to need compaction.  It will also increase the background load on the Hadoop cluster as more MapReduce jobs will be running in the background.  Each compaction can handle one partition at a time (or whole table if it&rsquo;s unpartitioned).  </p>
</li>
<li>
<p>Decreasing this value will reduce the time it takes for compaction to be started for a table or partition that requires compaction.  However, checking if compaction is needed requires several calls to the NameNode for each table or partition that has had a transaction done on it since the last major compaction.  So decreasing this value will increase the load on the NameNode.</p>
</li>
<li>
<p>If the compactor detects a very high number of delta files, it will first run several partial minor compactions (currently sequentially) and then perform the compaction actually requested.</p>
</li>
<li>
<p>If the value is not the same active transactions may be determined to be &ldquo;timed out&rdquo; and consequently Aborted.  This will result in errors like &ldquo;No such transaction&mldr;&rdquo;, &ldquo;No such lock &mldr;&rdquo;</p>
</li>
</ol>
<h3 id=configuration-values-to-set-forinsert-update-delete>Configuration Values to Set for <em>INSERT, UPDATE, DELETE</em></h3>
<p>In addition to the new parameters listed above, some existing parameters need to be set to support *INSERT &mldr; VALUES, UPDATE,*and <em>DELETE</em>.</p>
<table>
<thead>
<tr>
<th>Configuration key</th>
<th>Must be set to</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=#hive-support-concurrency>hive.support.concurrency</a></td>
<td>true (default is false)</td>
</tr>
<tr>
<td><a href=#hive-enforce-bucketing>hive.enforce.bucketing</a></td>
<td>true (default is false) (Not required as of <a href=https://issues.apache.org/jira/browse/HIVE-12331>Hive 2.0</a>)</td>
</tr>
<tr>
<td><a href=#hive-exec-dynamic-partition-mode>hive.exec.dynamic.partition.mode</a></td>
<td>nonstrict (default is strict)</td>
</tr>
</tbody>
</table>
<h3 id=configuration-values-to-set-for-compaction>Configuration Values to Set for Compaction</h3>
<p>If the data in your system is not owned by the Hive user (i.e., the user that the Hive metastore runs as), then Hive will need permission to run as the user who owns the data in order to perform compactions.  If you have already set up HiveServer2 to impersonate users, then the only additional work to do is assure that Hive has the right to impersonate users from the host running the Hive metastore.  This is done by adding the hostname to <code>hadoop.proxyuser.hive.hosts</code> in Hadoop&rsquo;s <code>core-site.xml</code> file.  If you have not already done this, then you will need to configure Hive to act as a proxy user.  This requires you to set up keytabs for the user running the Hive metastore and add <code>hadoop.proxyuser.hive.hosts</code> and <code>hadoop.proxyuser.hive.groups</code> to Hadoop&rsquo;s <code>core-site.xml</code> file.  See the Hadoop documentation on secure mode for your version of Hadoop (e.g., for Hadoop 2.5.1 it is at <a href=http://hadoop.apache.org/docs/r2.5.1/hadoop-project-dist/hadoop-common/SecureMode.html>Hadoop in Secure Mode</a>).</p>
<h3 id=compaction-pooling>Compaction pooling</h3>
<p>More in formation on compaction pooling can be found here: <a href=https://cwiki.apache.org/confluence/display/Hive/Compaction+pooling>Compaction pooling</a></p>
<h2 id=table-properties>Table Properties</h2>
<p>If a table is to be used in ACID writes (insert, update, delete) then the table property &ldquo;<code>transactional=true</code>&rdquo; must be set on that table, starting with <a href=https://issues.apache.org/jira/browse/HIVE-8290>Hive 0.14.0</a>. Note, once a table has been defined as an ACID table via TBLPROPERTIES (&ldquo;transactional&rdquo;=&ldquo;true&rdquo;), it cannot be converted back to a non-ACID table, i.e., changing TBLPROPERTIES (&ldquo;transactional&rdquo;=&ldquo;false&rdquo;) is not allowed. Also, <a href=#hive-txn-manager>hive.txn.manager</a> must be set to org.apache.hadoop.hive.ql.lockmgr.DbTxnManager either in hive-site.xml or in the beginning of the session before any query is run. Without those, inserts will be done in the old style; updates and deletes will be prohibited prior to HIVE-11716.  Since HIVE-11716 operations on ACID tables without DbTxnManager are not allowed.  However, this does not apply to Hive 0.13.0.</p>
<p>If a table owner does not wish the system to automatically determine when to compact, then the table property &ldquo;<code>NO_AUTO_COMPACTION</code>&rdquo; can be set.  This will prevent all automatic compactions.  Manual compactions can still be done with <a href=#alter-table/partition-compact>Alter Table/Partition Compact</a> statements.</p>
<p>Table properties are set with the TBLPROPERTIES clause when a table is created or altered, as described in the <a href=#create-table>Create Table</a> and <a href=#alter-table-properties>Alter Table Properties</a> sections of Hive Data Definition Language. The &ldquo;<code>transactional</code>&rdquo; and &ldquo;<code>NO_AUTO_COMPACTION</code>&rdquo; table properties are case-sensitive in Hive releases 0.x and 1.0, but they are case-insensitive starting with release 1.1.0 (<a href=https://issues.apache.org/jira/browse/HIVE-8308>HIVE-8308</a>).</p>
<p>More compaction related options can be set via TBLPROPERTIES as of <a href=https://issues.apache.org/jira/browse/HIVE-13354>Hive 1.3.0 and 2.1.0</a>. They can be set at both table-level via <a href=https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-Create/Drop/TruncateTable>CREATE TABLE</a>, and on request-level via <a href=https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-AlterTable/PartitionCompact>ALTER TABLE/PARTITION COMPACT</a>.  These are used to override the Warehouse/table wide settings.  For example, to override an MR property to affect a compaction job, one can add &ldquo;compactor.=&rdquo; in either CREATE TABLE statement or when launching a compaction explicitly via ALTER TABLE.  The &ldquo;=&rdquo; will be set on JobConf of the compaction MR job.   Similarly, &ldquo;tblprops.=&rdquo; can be used to set/override any table property which is interpreted by the code running on the cluster.  Finally, &ldquo;compactorthreshold.=&rdquo; can be used to override properties from the &ldquo;New Configuration Parameters for Transactions&rdquo; table above that end with &ldquo;.threshold&rdquo; and control when compactions are triggered by the system.  Examples:</p>
<p><strong>Example: Set compaction options in TBLPROPERTIES at table level</strong></p>
<pre tabindex=0><code>CREATE TABLE table_name (
  id                int,
  name              string
)
CLUSTERED BY (id) INTO 2 BUCKETS STORED AS ORC
TBLPROPERTIES (&quot;transactional&quot;=&quot;true&quot;,
  &quot;compactor.mapreduce.map.memory.mb&quot;=&quot;2048&quot;,     -- specify compaction map job properties
  &quot;compactorthreshold.hive.compactor.delta.num.threshold&quot;=&quot;4&quot;,  -- trigger minor compaction if there are more than 4 delta directories
  &quot;compactorthreshold.hive.compactor.delta.pct.threshold&quot;=&quot;0.5&quot; -- trigger major compaction if the ratio of size of delta files to
                                                                   -- size of base files is greater than 50%
);
</code></pre><p><strong>Example: Set compaction options in TBLPROPERTIES at request level</strong></p>
<pre tabindex=0><code>ALTER TABLE table_name COMPACT 'minor' 
   WITH OVERWRITE TBLPROPERTIES (&quot;compactor.mapreduce.map.memory.mb&quot;=&quot;3072&quot;);  -- specify compaction map job properties
ALTER TABLE table_name COMPACT 'major'
   WITH OVERWRITE TBLPROPERTIES (&quot;tblprops.orc.compress.size&quot;=&quot;8192&quot;);         -- change any other Hive table properties
</code></pre><h1 id=talks-and-presentations>Talks and Presentations</h1>
<p>Transactional Operations In Hive by Eugene Koifman at <a href=https://dataworkssummit.com/san-jose-2017/agenda/>Dataworks Summit 2017, San Jose, CA, USA</a></p>
<ul>
<li><a href=https://www.slideshare.net/Hadoop_Summit/transactional-sql-in-apache-hive>Slides</a></li>
<li><a href="https://www.youtube.com/watch?v=Rk8irGDjpuI&feature=youtu.be">Video</a></li>
</ul>
<p>DataWorks Summit 2018, San Jose, CA, USA - Covers Hive 3 and ACID V2 features</p>
<ul>
<li><a href=https://www.slideshare.net/Hadoop_Summit/transactional-operations-in-apache-hive-present-and-future-102803358>Slides</a></li>
<li><a href="https://www.youtube.com/watch?v=GyzU9wG0cFQ&t=834s">Video</a></li>
</ul>
<p>Save</p>
<p>Save</p>
</div>
</div>
<footer class="black-background static-bottom" style=padding:30px>
<div class=row>
<div class=col-3>
<a href=https://www.apache.org/>
<img src=https://hive.apache.org/images/asf_logo.png width=270 height=100 alt="Apache Software Foundation"></a>
</a>
</div>
<div class=col-9>
<p class=footer-text>Apache is a non-profit organization helping open-source
software projects released under the Apache
<a href=https://www.apache.org/licenses/>license</a>
and managed with
<a href=https://www.apache.org/foundation/how-it-works.html>
open governance</a> and
<a href=https://privacy.apache.org/policies/privacy-policy-public.html>
privacy policy</a>. See upcoming
<a href=https://www.apache.org/events/current-event>Apache Events</a>.
If you discover any
<a href=https://www.apache.org/security/>security</a> vulnerabilities, please
report them privately. Finally,
<a href=https://www.apache.org/foundation/sponsorship.html>thanks
</a> to the sponsors who
<a href=https://www.apache.org/foundation/contributing.html>
donate</a> to the Apache Foundation.
</p>
</div>
</div>
<div class="copyright row">
<a href=https://hive.apache.org style=color:grey>
The contents of this website are © 2023 Apache Software Foundation under the terms of the Apache License v2. Apache Hive and its logo are trademarks of the Apache Software Foundation.
</a>
</div>
</footer>
<script src=https://hive.apache.org/js/bootstrap.bundle.min.js></script>
</body>
</html>