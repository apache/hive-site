<!doctype html><html><!doctype html>
<html>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content>
<meta name=author content>
<title>Apache Hive : HiveAmazonElasticMapReduce</title>
<link rel=icon href=/images/hive.svg sizes=any type=image/svg+xml>
<link rel=stylesheet href=https://hive.apache.org/css/hive-theme.css>
<link rel=stylesheet href=https://hive.apache.org/css/font-awesome.all.min.css>
<link rel=stylesheet href=https://hive.apache.org/css/bootstrap.min.css>
<link rel=stylesheet href=https://hive.apache.org/css/termynal.css>
<link rel=apple-touch-icon sizes=180x180 href=https://hive.apache.org/images/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=https://hive.apache.org/images/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=https://hive.apache.org/images/favicon-16x16.png>
<link rel=manifest href=https://hive.apache.org/images/site.webmanifest>
<link rel=mask-icon href=https://hive.apache.org/images/safari-pinned-tab.svg color=#5bbad5>
<meta name=msapplication-TileColor content="#da532c">
<meta name=theme-color content="#ffffff">
<script>var _paq=window._paq=window._paq||[];_paq.push(['disableCookies']),_paq.push(['trackPageView']),_paq.push(['enableLinkTracking']),function(){var b="https://analytics.apache.org/",c,a,d;_paq.push(['setTrackerUrl',b+'matomo.php']),_paq.push(['setSiteId','30']),c=document,a=c.createElement('script'),d=c.getElementsByTagName('script')[0],a.async=!0,a.src=b+'matomo.js',d.parentNode.insertBefore(a,d)}()</script>
</head>
<body>
<body>
<header>
<menu style=background:#000;margin:0>
<nav class="navbar navbar-expand-lg navbar-dark bg-black">
<div class=container-fluid>
<a href=https://hive.apache.org> <img src=https://hive.apache.org/images/hive.svg width=60 height=35 alt="Apache Software Foundation"></a>
<a class="header-text navbar-brand" href=https://hive.apache.org>Apache Hive</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span>
</button>
<div class="collapse navbar-collapse" id=navbarSupportedContent>
<ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item dropdown">
<a class=nav-link href=/general/downloads id=navbarDropdown role=button aria-expanded=false>
Releases
</a>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=/Document id=navbarDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
Documentation
</a>
<ul class=dropdown-menu aria-labelledby=navbarDropdown>
<li><a class=dropdown-item href=/docs/latest/>Latest</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/docs/javadocs/>Javadocs</a></li>
<li><a class=dropdown-item href=https://cwiki.apache.org/confluence/display/Hive/LanguageManual>Language Manual</a></li>
</ul>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=/general id=navbarDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
General
</a>
<ul class=dropdown-menu aria-labelledby=navbarDropdown>
<li><a class=dropdown-item href=https://www.apache.org/licenses/LICENSE-2.0.html>License</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/general/privacypolicy/>Privacy Policy</a></li>
</ul>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
Development
</a>
<ul class=dropdown-menu aria-labelledby=navbarDropdown>
<li><a class=dropdown-item href=https://hive.apache.org/development/gettingstarted/>Getting Started</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/development/quickstart/>Quickstart with Docker</a></li>
<li><a class=dropdown-item href=https://cwiki.apache.org/confluence/display/Hive/DesignDocs>Design Docs</a></li>
<li><a class=dropdown-item href=https://issues.apache.org/jira/projects/HIVE/issues>Hive JIRA</a></li>
<li><a class=dropdown-item href=https://cwiki.apache.org/confluence/display/Hive/HiveDeveloperFAQ>Hive Developer FAQ</a></li>
<li><a class=dropdown-item href=https://cwiki.apache.org/confluence/display/Hive/Hive+PreCommit+Patch+Testing>Precommit Patch Testing</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/development/versioncontrol/>Version Control</a></li>
</ul>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
Community
</a>
<ul class=dropdown-menu aria-labelledby=navbarDropdown>
<li><a class=dropdown-item href=/community/becomingcommitter/>Becoming A Committer</a></li>
<li><a class=dropdown-item href=https://cwiki.apache.org/confluence/display/Hive/HowToContribute>How To Contribute</a></li>
<li><a class=dropdown-item href=https://cwiki.apache.org/confluence/display/Hive/Home#Home-ResourcesforContributors>Resources for Contributors</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/community/mailinglists/>Mailing Lists</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/community/issuetracking/>Issue Tracking</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/community/people/>People</a></li>
<li>
<hr class=dropdown-divider>
</li>
<li><a class=dropdown-item href=/community/bylaws/>By Laws</a></li>
<li><a class=dropdown-item href=https://cwiki.apache.org/confluence/display/Hive/HowToRelease>How To Release</a></li>
</ul>
</li>
<li class="nav-item dropdown">
<a class=nav-link href=https://hive.blog.apache.org/ id=navbarDropdown role=button aria-expanded=false>
Blogs
</a>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
ASF
</a>
<ul class=dropdown-menu aria-labelledby=navbarDropdown>
<li><a class=dropdown-item href=https://www.apache.org/foundation/contributing.html>Donations</a></li>
<li><a class=dropdown-item href=https://www.apache.org/foundation/sponsorship.html>Sponsorship</a></li>
<li><a class=dropdown-item href=https://www.apache.org/foundation/thanks.html>Thanks</a></li>
<li><a class=dropdown-item href=https://www.apache.org/>Website</a></li>
</ul>
</li>
<li>
<form action=/search method=get class=search-bar>
<input type=search name=q id=search-query placeholder=Search... class=search-input>
<button type=submit class=search-button>Search</button>
</form>
</li>
</ul>
</div>
</div>
</nav>
</menu>
</header>
<div class=content>
<div class=docs>
<h1 id=apache-hive--hiveamazonelasticmapreduce>Apache Hive : HiveAmazonElasticMapReduce</h1>
<h1 id=amazon-elastic-mapreduce-and-hive>Amazon Elastic MapReduce and Hive</h1>
<p>Amazon Elastic MapReduce is a web service that makes it easy to launch managed, resizable Hadoop clusters on the web-scale infrastructure of Amazon Web Services (AWS). Elastic Map Reduce makes it easy for you to launch a Hive and Hadoop cluster, provides you with flexibility to choose different cluster sizes, and allows you to tear them down automatically when processing has completed. You pay only for the resources that you use with no minimums or long-term commitments.</p>
<p>Amazon Elastic MapReduce simplifies the use of Hive clusters by:</p>
<ol>
<li>Handling the provisioning of Hadoop clusters of up to thousands of EC2 instances</li>
<li>Installing Hadoop across the master and slave nodes of your cluster and configuring Hadoop based on your chosen hardware</li>
<li>Installing Hive on the master node of your cluster and configuring it for communication with the Hadoop JobTracker and NameNode</li>
<li>Providing a simple API, a web UI, and purpose-built tools for managing, monitoring, and debugging Hadoop tasks throughout the life of the cluster</li>
<li>Providing deep integration, and optimized performance, with AWS services such as S3 and EC2 and AWS features such as Spot Instances, Elastic IPs, and Identity and Access Management (IAM)</li>
</ol>
<p>Please refer to the following link to view the Amazon Elastic MapReduce Getting Started Guide:</p>
<p><a href=http://docs.amazonwebservices.com/ElasticMapReduce/latest/GettingStartedGuide/>http://docs.amazonwebservices.com/ElasticMapReduce/latest/GettingStartedGuide/</a></p>
<p>Amazon Elastic MapReduce provides you with multiple clients to run your Hive cluster. You can launch a Hive cluster using the AWS Management Console, the Amazon Elastic MapReduce Ruby Client, or the AWS Java SDK. You may also install and run multiple versions of Hive on the same cluster, allowing you to benchmark a newer Hive version alongside your previous version. You can also install a newer Hive version directly onto an existing Hive cluster.</p>
<h1 id=supported-versions>Supported versions:</h1>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Hadoop Version</td>
<td>Hive Version</td>
</tr>
<tr>
<td>0.18</td>
<td>0.4</td>
</tr>
<tr>
<td>0.20</td>
<td>0.5, 0.7, 0.7.1</td>
</tr>
</tbody>
</table>
<h1 id=hive-defaults>Hive Defaults</h1>
<h2 id=thrift-communication-port>Thrift Communication port</h2>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Hive Version</td>
<td>Thrift port</td>
</tr>
<tr>
<td>0.4</td>
<td>10000</td>
</tr>
<tr>
<td>0.5</td>
<td>10000</td>
</tr>
<tr>
<td>0.7</td>
<td>10001</td>
</tr>
<tr>
<td>0.7.1</td>
<td>10002</td>
</tr>
</tbody>
</table>
<h2 id=log-file>Log File</h2>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Hive Version</td>
<td>Log location</td>
</tr>
<tr>
<td>0.4</td>
<td>/mnt/var/log/apps/hive.log</td>
</tr>
<tr>
<td>0.5</td>
<td>/mnt/var/log/apps/hive_05.log</td>
</tr>
<tr>
<td>0.7</td>
<td>/mnt/var/log/apps/hive_07.log</td>
</tr>
<tr>
<td>0.7.1</td>
<td>/mnt/var/log/apps/hive_07_1.log</td>
</tr>
</tbody>
</table>
<h1 id=metastore>MetaStore</h1>
<p>By default, Amazon Elastic MapReduce uses MySQL, preinstalled on the Master Node, for its Hive metastore. Alternatively, you can use the Amazon Relational Database Service (Amazon RDS) to ensure the metastore is persisted beyond the life of your cluster. This also allows you to share the metastore between multiple Hive clusters. Simply override the default location of the MySQL database to the external persistent storage location.</p>
<h1 id=hive-cli>Hive CLI</h1>
<p>EMR configures the master node to allow SSH access. You can log onto the master node and execute Hive commands using the Hive CLI. If you have multiple versions of Hive installed on the cluster you can access each one of them via a separate command:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Hive Version</td>
<td>Hive command</td>
</tr>
<tr>
<td>0.4</td>
<td>hive</td>
</tr>
<tr>
<td>0.5</td>
<td>hive-0.5</td>
</tr>
<tr>
<td>0.7</td>
<td>hive-0.7</td>
</tr>
<tr>
<td>0.7.1</td>
<td>hive-0.7.1</td>
</tr>
</tbody>
</table>
<p>EMR sets up a separate Hive metastore and Hive warehouse for each installed Hive version on a given cluster. Hence, creating tables using one version does not interfere with the tables created using another version installed. Please note that if you point multiple Hive tables to same location, updates to one table become visible to other tables.</p>
<h1 id=hive-server>Hive Server</h1>
<p>EMR runs a Thrift Hive server on the master node of the Hive cluster. It can be accessed using any JDBC client (for example, squirrel SQL) via Hive JDBC drivers. The JDBC drivers for different Hive versions can be downloaded via the following links:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Hive Version</td>
<td>Hive JDBC</td>
</tr>
<tr>
<td>0.5</td>
<td><a href=http://aws.amazon.com/developertools/0196055244487017>http://aws.amazon.com/developertools/0196055244487017</a></td>
</tr>
<tr>
<td>0.7</td>
<td><a href=http://aws.amazon.com/developertools/1818074809286277>http://aws.amazon.com/developertools/1818074809286277</a></td>
</tr>
<tr>
<td>0.7.1</td>
<td><a href=http://aws.amazon.com/developertools/8084613472207189>http://aws.amazon.com/developertools/8084613472207189</a></td>
</tr>
</tbody>
</table>
<p>Here is the process to connect to the Hive Server using a JDBC driver:</p>
<p><a href=http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/UsingEMR_Hive.html#HiveJDBCDriver>http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/UsingEMR_Hive.html#HiveJDBCDriver</a></p>
<h1 id=running-batch-queries>Running Batch Queries</h1>
<p>You can also submit queries from the command line client remotely. Please note that currently there is a limit of 256 steps on each cluster. If you have more than 256 steps to execute, it is recommended that you run the queries directly using the Hive CLI or submit queries via a JDBC driver.</p>
<h1 id=hive-s3-tables>Hive S3 Tables</h1>
<p>An Elastic MapReduce Hive cluster comes configured for communication with S3. You can create tables and point them to your S3 location and Hive and Hadoop will communicate with S3 automatically using your provided credentials.</p>
<p>Once you have moved data to an S3 bucket, you simply point your table to that location in S3 in order to read or process data via Hive. You can also create partitioned tables in S3. Hive on Elastic MapReduce provides support for dynamic partitioning in S3.</p>
<h1 id=hive-logs>Hive Logs</h1>
<p>Hive application logs: All Hive application logs are redirected to /mnt/var/log/apps/ directory.</p>
<p>Hadoop daemon logs: Hadoop daemon logs are available in /mnt/var/log/hadoop/ folder.</p>
<p>Hadoop task attempt logs are available in /mnt/var/log/hadoop/userlogs/ folder on each slave node in the cluster.</p>
<h1 id=tutorials>Tutorials</h1>
<p>The following Hive tutorials are available for you to get started with Hive on Elastic MapReduce:</p>
<ol>
<li>Finding trending topics using Google Books n-grams data and Apache Hive on Elastic MapReduce
<ul>
<li><a href=http://aws.amazon.com/articles/Elastic-MapReduce/5249664154115844>http://aws.amazon.com/articles/Elastic-MapReduce/5249664154115844</a></li>
</ul>
</li>
<li>Contextual Advertising using Apache Hive and Amazon Elastic MapReduce with High Performance Computing instances
<ul>
<li><a href=http://aws.amazon.com/articles/Elastic-MapReduce/2855>http://aws.amazon.com/articles/Elastic-MapReduce/2855</a></li>
</ul>
</li>
<li>Operating a Data Warehouse with Hive, Amazon Elastic MapReduce and Amazon SimpleDB
<ul>
<li><a href=http://aws.amazon.com/articles/Elastic-MapReduce/2854>http://aws.amazon.com/articles/Elastic-MapReduce/2854</a></li>
</ul>
</li>
<li>Running Hive on Amazon ElasticMap Reduce
<ul>
<li><a href=http://aws.amazon.com/articles/2857>http://aws.amazon.com/articles/2857</a></li>
</ul>
</li>
</ol>
<p>In addition, Amazon provides step-by-step video tutorials:</p>
<ul>
<li><a href=http://aws.amazon.com/articles/2862>http://aws.amazon.com/articles/2862</a></li>
</ul>
<h1 id=support>Support</h1>
<p>You can ask questions related to Hive on Elastic MapReduce on Elastic MapReduce forums at:</p>
<p><a href="https://forums.aws.amazon.com/forum.jspa?forumID=52">https://forums.aws.amazon.com/forum.jspa?forumID=52</a></p>
<p>Please also refer to the EMR developer guide for more information:</p>
<p><a href=http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/>http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/</a></p>
<p>Contributed by: Vaibhav Aggarwal</p>
</div>
</div>
<footer class="black-background static-bottom" style=padding:30px>
<div class=row>
<div class=col-3>
<a href=https://www.apache.org/>
<img src=https://hive.apache.org/images/asf_logo.png width=270 height=100 alt="Apache Software Foundation"></a>
</a>
</div>
<div class=col-9>
<p class=footer-text>Apache is a non-profit organization helping open-source
software projects released under the Apache
<a href=https://www.apache.org/licenses/>license</a>
and managed with
<a href=https://www.apache.org/foundation/how-it-works.html>
open governance</a> and
<a href=https://privacy.apache.org/policies/privacy-policy-public.html>
privacy policy</a>. See upcoming
<a href=https://www.apache.org/events/current-event>Apache Events</a>.
If you discover any
<a href=https://www.apache.org/security/>security</a> vulnerabilities, please
report them privately. Finally,
<a href=https://www.apache.org/foundation/sponsorship.html>thanks
</a> to the sponsors who
<a href=https://www.apache.org/foundation/contributing.html>
donate</a> to the Apache Foundation.
</p>
</div>
</div>
<div class="copyright row">
<a href=https://hive.apache.org style=color:grey>
The contents of this website are Â© 2023 Apache Software Foundation under the terms of the Apache License v2. Apache Hive and its logo are trademarks of the Apache Software Foundation.
</a>
</div>
</footer>
<script src=https://hive.apache.org/js/bootstrap.bundle.min.js></script>
</body>
</html>