<!doctype html><html><!doctype html>
<html>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content>
<meta name=author content>
<title>Apache Hive : HiveClient</title>
<link rel=icon href=/images/hive.svg sizes=any type=image/svg+xml>
<link rel=stylesheet href=https://hive.apache.org/css/hive-theme.css>
<link rel=stylesheet href=https://hive.apache.org/css/font-awesome.all.min.css>
<link rel=stylesheet href=https://hive.apache.org/css/bootstrap.min.css>
<link rel=stylesheet href=https://hive.apache.org/css/termynal.css>
<link rel=apple-touch-icon sizes=180x180 href=https://hive.apache.org/images/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=https://hive.apache.org/images/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=https://hive.apache.org/images/favicon-16x16.png>
<link rel=manifest href=https://hive.apache.org/images/site.webmanifest>
<link rel=mask-icon href=https://hive.apache.org/images/safari-pinned-tab.svg color=#5bbad5>
<meta name=msapplication-TileColor content="#da532c">
<meta name=theme-color content="#ffffff">
<script>var _paq=window._paq=window._paq||[];_paq.push(['disableCookies']),_paq.push(['trackPageView']),_paq.push(['enableLinkTracking']),function(){var b="https://analytics.apache.org/",c,a,d;_paq.push(['setTrackerUrl',b+'matomo.php']),_paq.push(['setSiteId','30']),c=document,a=c.createElement('script'),d=c.getElementsByTagName('script')[0],a.async=!0,a.src=b+'matomo.js',d.parentNode.insertBefore(a,d)}()</script>
</head>
<body>
<body>
<header>
<menu class=main-menu>
<nav class="navbar navbar-expand-lg navbar-dark">
<div class=container-fluid>
<div class=navbar-brand-wrapper>
<a href=https://hive.apache.org class=navbar-logo>
<img src=https://hive.apache.org/images/hive.svg width=50 height=30 alt="Apache Hive Logo">
</a>
<a class=navbar-brand href=https://hive.apache.org>Apache Hive</a>
</div>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span>
</button>
<div class="collapse navbar-collapse" id=navbarSupportedContent>
<ul class="navbar-nav me-auto">
<li class=nav-item>
<a class=nav-link href=https://hive.apache.org/general/downloads>
Releases
</a>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=/Document id=docsDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
Documentation
</a>
<ul class=dropdown-menu aria-labelledby=docsDropdown>
<li><a class=dropdown-item href=https://hive.apache.org/docs/latest/>Latest</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/docs/javadocs/>Javadocs</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/docs/latest/language/languagemanual>Language Manual</a></li>
</ul>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=/general id=generalDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
General
</a>
<ul class=dropdown-menu aria-labelledby=generalDropdown>
<li><a class=dropdown-item href=https://www.apache.org/licenses/LICENSE-2.0.html>License</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/general/privacypolicy/>Privacy Policy</a></li>
<li><a class=dropdown-item href=/general/poweredby/>Powered by</a></li>
</ul>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=# id=devDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
Development
</a>
<ul class=dropdown-menu aria-labelledby=devDropdown>
<li><a class=dropdown-item href=https://hive.apache.org/development/gettingstarted/>Getting Started</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/development/quickstart/>Quickstart with Docker</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/development/desingdocs/>Design Docs</a></li>
<li><a class=dropdown-item href=https://issues.apache.org/jira/projects/HIVE/issues>Hive JIRA</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/community/resources/hivedeveloperfaq>Hive Developer FAQ</a></li>
<li><a class=dropdown-item href=https://cwiki.apache.org/confluence/display/Hive/Hive+PreCommit+Patch+Testing>Precommit Patch Testing</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/development/versioncontrol/>Version Control</a></li>
</ul>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=# id=communityDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
Community
</a>
<ul class=dropdown-menu aria-labelledby=communityDropdown>
<li><a class=dropdown-item href=/community/becomingcommitter/>Becoming A Committer</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/community/resources/howtocontribute>How To Contribute</a></li>
<li><a class=dropdown-item href=/community/resources/>Resources</a></li>
<li><a class=dropdown-item href=/community/meetings/>Meetings</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/community/mailinglists/>Mailing Lists</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/community/issuetracking/>Issue Tracking</a></li>
<li><a class=dropdown-item href=https://hive.apache.org/community/people/>People</a></li>
<li><hr class=dropdown-divider></li>
<li><a class=dropdown-item href=/community/bylaws/>By Laws</a></li>
<li><a class=dropdown-item href=/community/resources/howtorelease/>How To Release</a></li>
</ul>
</li>
<li class=nav-item>
<a class=nav-link href=https://hive.blog.apache.org/>
Blogs
</a>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=# id=asfDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
ASF
</a>
<ul class=dropdown-menu aria-labelledby=asfDropdown>
<li><a class=dropdown-item href=https://www.apache.org/foundation/contributing.html>Donations</a></li>
<li><a class=dropdown-item href=https://www.apache.org/foundation/sponsorship.html>Sponsorship</a></li>
<li><a class=dropdown-item href=https://www.apache.org/foundation/thanks.html>Thanks</a></li>
<li><a class=dropdown-item href=https://www.apache.org/>Website</a></li>
</ul>
</li>
</ul>
<div class=navbar-search>
<form action=/search method=get class=search-form>
<div class=search-input-group>
<input type=search name=q id=search-query placeholder=Search... class=search-input aria-label=Search>
<button type=submit class=search-button aria-label="Submit search">
<i class="fas fa-search"></i>
</button>
</div>
</form>
</div>
</div>
</div>
</nav>
</menu>
</header>
<div class=content>
<div class=docs-container>
<main class="docs-main docs-main-full">
<article class=docs-content>
<nav class=docs-breadcrumb>
<ol>
<li><a href=/><i class="fas fa-home"></i> Home</a></li>
<li><a href=/docs/>Documentation</a></li>
<li class=active>Apache Hive : HiveClient</li>
</ol>
</nav>
<header class=docs-header>
<h1 class=docs-title>Apache Hive : HiveClient</h1>
<div class=docs-meta>
<span class=docs-date>
<i class="fas fa-calendar-alt"></i>
Last updated: December 12, 2024
</span>
</div>
</header>
<div class=docs-toc>
<h4><i class="fas fa-list"></i> Table of Contents</h4>
<nav id=TableOfContents>
<ul>
<li><a href=#apache-hive--hiveclient>Apache Hive : HiveClient</a></li>
<li><a href=#command-line>Command Line</a></li>
<li><a href=#jdbc>JDBC</a>
<ul>
<li><a href=#jdbc-client-sample-code>JDBC Client Sample Code</a>
<ul>
<li><a href=#running-the-jdbc-sample-code>Running the JDBC Sample Code</a></li>
</ul>
</li>
<li><a href=#jdbc-client-setup-for-a-secure-cluster>JDBC Client Setup for a Secure Cluster</a></li>
</ul>
</li>
<li><a href=#python>Python</a></li>
<li><a href=#php>PHP</a></li>
<li><a href=#odbc>ODBC</a></li>
<li><a href=#thrift>Thrift</a>
<ul>
<li><a href=#thrift-java-client>Thrift Java Client</a></li>
<li><a href=#thrift-c-client>Thrift C++ Client</a></li>
<li><a href=#thrift-node-clients>Thrift Node Clients</a></li>
<li><a href=#thrift-ruby-client>Thrift Ruby Client</a></li>
</ul>
</li>
</ul>
</nav>
</div>
<div class=docs-article>
<h1 id=apache-hive--hiveclient>Apache Hive : HiveClient</h1>
<p>This page describes the different clients supported by Hive. The command line client currently only supports an embedded server. The JDBC and Thrift-Java clients support both embedded and standalone servers. Clients in other languages only support standalone servers.</p>
<p>For details about the standalone server see <a href=https://hive.apache.org/docs/latest/admin/hiveserver/>Hive Server</a> or <a href=https://hive.apache.org/docs/latest/admin/setting-up-hiveserver2/>HiveServer2</a>.</p>
<aside class=table-of-contents>
<nav id=TableOfContents>
<ul>
<li><a href=#apache-hive--hiveclient>Apache Hive : HiveClient</a></li>
<li><a href=#command-line>Command Line</a></li>
<li><a href=#jdbc>JDBC</a>
<ul>
<li><a href=#jdbc-client-sample-code>JDBC Client Sample Code</a>
<ul>
<li><a href=#running-the-jdbc-sample-code>Running the JDBC Sample Code</a></li>
</ul>
</li>
<li><a href=#jdbc-client-setup-for-a-secure-cluster>JDBC Client Setup for a Secure Cluster</a></li>
</ul>
</li>
<li><a href=#python>Python</a></li>
<li><a href=#php>PHP</a></li>
<li><a href=#odbc>ODBC</a></li>
<li><a href=#thrift>Thrift</a>
<ul>
<li><a href=#thrift-java-client>Thrift Java Client</a></li>
<li><a href=#thrift-c-client>Thrift C++ Client</a></li>
<li><a href=#thrift-node-clients>Thrift Node Clients</a></li>
<li><a href=#thrift-ruby-client>Thrift Ruby Client</a></li>
</ul>
</li>
</ul>
</nav>
</aside>
<h1 id=command-line>Command Line</h1>
<p>Operates in embedded mode only, that is, it needs to have access to the Hive libraries. For more details see <a href=https://hive.apache.org/development/gettingstarted-latest/>Getting Started</a> and <a href=https://hive.apache.org/docs/latest/language/languagemanual-cli/>Hive CLI</a>.</p>
<h1 id=jdbc>JDBC</h1>
<p><strong>This document describes the JDBC client for the original <a href=https://hive.apache.org/docs/latest/admin/hiveserver/>Hive Server</a> (sometimes called <em>Thrift server</em> or <em>HiveServer1</em>). For information about the HiveServer2 JDBC client, see <a href=#jdbc-in-the-hiveserver2-clients-document>JDBC in the HiveServer2 Clients document</a>. HiveServer2 use is recommended; the original HiveServer has several concurrency issues and lacks several features available in HiveServer2.</strong></p>
<p>Version information</p>
<p>The original <a href=https://hive.apache.org/docs/latest/admin/hiveserver/>Hive Server</a> was removed from Hive releases starting in <a href=#version-1-0-0>version 1.0.0</a>. See <a href=https://issues.apache.org/jira/browse/HIVE-6977>HIVE-6977</a>.</p>
<p>For embedded mode, uri is just &ldquo;jdbc:hive://&rdquo;. For standalone server, uri is &ldquo;jdbc:hive://host:port/dbname&rdquo; where host and port are determined by where the Hive server is run. For example, &ldquo;jdbc:hive://localhost:10000/default&rdquo;. Currently, the only dbname supported is &ldquo;default&rdquo;.</p>
<h2 id=jdbc-client-sample-code>JDBC Client Sample Code</h2>
<pre tabindex=0><code>import java.sql.SQLException;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.Statement;
import java.sql.DriverManager;

public class HiveJdbcClient {
  private static String driverName = &quot;org.apache.hadoop.hive.jdbc.HiveDriver&quot;;

  public static void main(String[] args) throws SQLException {
    try {
      Class.forName(driverName);
    } catch (ClassNotFoundException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
      System.exit(1);
    }
    Connection con = DriverManager.getConnection(&quot;jdbc:hive://localhost:10000/default&quot;, &quot;&quot;, &quot;&quot;);
    Statement stmt = con.createStatement();
    String tableName = &quot;testHiveDriverTable&quot;;
    stmt.executeQuery(&quot;drop table &quot; + tableName);
    ResultSet res = stmt.executeQuery(&quot;create table &quot; + tableName + &quot; (key int, value string)&quot;);
    // show tables
    String sql = &quot;show tables '&quot; + tableName + &quot;'&quot;;
    System.out.println(&quot;Running: &quot; + sql);
    res = stmt.executeQuery(sql);
    if (res.next()) {
      System.out.println(res.getString(1));
    }
    // describe table
    sql = &quot;describe &quot; + tableName;
    System.out.println(&quot;Running: &quot; + sql);
    res = stmt.executeQuery(sql);
    while (res.next()) {
      System.out.println(res.getString(1) + &quot;\t&quot; + res.getString(2));
    }

    // load data into table
    // NOTE: filepath has to be local to the hive server
    // NOTE: /tmp/a.txt is a ctrl-A separated file with two fields per line
    String filepath = &quot;/tmp/a.txt&quot;;
    sql = &quot;load data local inpath '&quot; + filepath + &quot;' into table &quot; + tableName;
    System.out.println(&quot;Running: &quot; + sql);
    res = stmt.executeQuery(sql);

    // select * query
    sql = &quot;select * from &quot; + tableName;
    System.out.println(&quot;Running: &quot; + sql);
    res = stmt.executeQuery(sql);
    while (res.next()) {
      System.out.println(String.valueOf(res.getInt(1)) + &quot;\t&quot; + res.getString(2));
    }

    // regular hive query
    sql = &quot;select count(1) from &quot; + tableName;
    System.out.println(&quot;Running: &quot; + sql);
    res = stmt.executeQuery(sql);
    while (res.next()) {
      System.out.println(res.getString(1));
    }
  }
}

</code></pre><h3 id=running-the-jdbc-sample-code>Running the JDBC Sample Code</h3>
<pre tabindex=0><code># Then on the command-line
$ javac HiveJdbcClient.java

# To run the program in standalone mode, we need the following jars in the classpath
# from hive/build/dist/lib
#     hive_exec.jar
#     hive_jdbc.jar
#     hive_metastore.jar
#     hive_service.jar
#     libfb303.jar
#     log4j-1.2.15.jar
#
# from hadoop/build
#     hadoop-*-core.jar
#
# To run the program in embedded mode, we need the following additional jars in the classpath
# from hive/build/dist/lib
#     antlr-runtime-3.0.1.jar
#     derby.jar
#     jdo2-api-2.1.jar
#     jpox-core-1.2.2.jar
#     jpox-rdbms-1.2.2.jar
#
# as well as hive/build/dist/conf

$ java -cp $CLASSPATH HiveJdbcClient

# Alternatively, you can run the following bash script, which will seed the data file
# and build your classpath before invoking the client.

#!/bin/bash
HADOOP_HOME=/your/path/to/hadoop
HIVE_HOME=/your/path/to/hive

echo -e '1\x01foo' &gt; /tmp/a.txt
echo -e '2\x01bar' &gt;&gt; /tmp/a.txt

HADOOP_CORE={{ls $HADOOP_HOME/hadoop-*-core.jar}}
CLASSPATH=.:$HADOOP_CORE:$HIVE_HOME/conf

for i in ${HIVE_HOME}/lib/*.jar ; do
    CLASSPATH=$CLASSPATH:$i
done

java -cp $CLASSPATH HiveJdbcClient

</code></pre><h2 id=jdbc-client-setup-for-a-secure-cluster>JDBC Client Setup for a Secure Cluster</h2>
<p>To configure Hive on a secure cluster, add the directory containing hive-site.xml to the CLASSPATH of the JDBC client.</p>
<h1 id=python>Python</h1>
<p>Operates only on a standalone server. Set (and export) PYTHONPATH to build/dist/lib/py.</p>
<p>The python modules imported in the code below are generated by building hive.</p>
<p>Please note that the generated python module names have changed in hive trunk.</p>
<pre tabindex=0><code>#!/usr/bin/env python

import sys

from hive import ThriftHive
from hive.ttypes import HiveServerException
from thrift import Thrift
from thrift.transport import TSocket
from thrift.transport import TTransport
from thrift.protocol import TBinaryProtocol

try:
    transport = TSocket.TSocket('localhost', 10000)
    transport = TTransport.TBufferedTransport(transport)
    protocol = TBinaryProtocol.TBinaryProtocol(transport)

    client = ThriftHive.Client(protocol)
    transport.open()

    client.execute(&quot;CREATE TABLE r(a STRING, b INT, c DOUBLE)&quot;)
    client.execute(&quot;LOAD TABLE LOCAL INPATH '/path' INTO TABLE r&quot;)
    client.execute(&quot;SELECT * FROM r&quot;)
    while (1):
      row = client.fetchOne()
      if (row == None):
        break
      print row
    client.execute(&quot;SELECT * FROM r&quot;)
    print client.fetchAll()

    transport.close()

except Thrift.TException, tx:
    print '%s' % (tx.message)

</code></pre><h1 id=php>PHP</h1>
<p>Operates only on a standalone server.</p>
<pre tabindex=0><code>&lt;?php
// set THRIFT_ROOT to php directory of the hive distribution
$GLOBALS['THRIFT_ROOT'] = '/lib/php/';
// load the required files for connecting to Hive
require_once $GLOBALS['THRIFT_ROOT'] . 'packages/hive_service/ThriftHive.php';
require_once $GLOBALS['THRIFT_ROOT'] . 'transport/TSocket.php';
require_once $GLOBALS['THRIFT_ROOT'] . 'protocol/TBinaryProtocol.php';
// Set up the transport/protocol/client
$transport = new TSocket('localhost', 10000);
$protocol = new TBinaryProtocol($transport);
$client = new ThriftHiveClient($protocol);
$transport-&gt;open();

// run queries, metadata calls etc
$client-&gt;execute('SELECT * from src');
var_dump($client-&gt;fetchAll());
$transport-&gt;close();

</code></pre><h1 id=odbc>ODBC</h1>
<p>Operates only on a standalone server. The Hive ODBC client provides a set of C-compatible library functions to interact with Hive Server in a pattern similar to those dictated by the ODBC specification. See <a href=https://hive.apache.org/docs/latest/admin/hiveodbc/>Hive ODBC Driver</a>.</p>
<h1 id=thrift>Thrift</h1>
<h2 id=thrift-java-client>Thrift Java Client</h2>
<p>Operates both in embedded mode and on standalone server.</p>
<h2 id=thrift-c-client>Thrift C++ Client</h2>
<p>Operates only on a standalone server. In the works.</p>
<h2 id=thrift-node-clients>Thrift Node Clients</h2>
<p>Thrift Node clients are available on github at <a href=https://github.com/wdavidw/node-thrift-hive>https://github.com/wdavidw/node-thrift-hive</a> and <a href=https://github.com/forward/node-hive>https://github.com/forward/node-hive</a>.</p>
<h2 id=thrift-ruby-client>Thrift Ruby Client</h2>
<p>A Thrift Ruby client is available on github at <a href=https://github.com/forward3d/rbhive>https://github.com/forward3d/rbhive</a>.</p>
</div>
<footer class=docs-footer>
<div class=docs-feedback>
<h4><i class="fas fa-comment"></i> Feedback</h4>
<p>Was this page helpful? Let us know how we can improve.</p>
<div class=docs-feedback-buttons>
<button class="btn btn-feedback btn-positive">
<i class="fas fa-thumbs-up"></i> Yes
</button>
<button class="btn btn-feedback btn-negative">
<i class="fas fa-thumbs-down"></i> No
</button>
</div>
</div>
<div class=docs-edit>
<a href=https://github.com/apache/hive-site/edit/main/content/docs/latest/user/hiveclient.md class="btn btn-outline">
<i class="fab fa-github"></i> Edit this page on GitHub
</a>
</div>
</footer>
</article>
<aside class=docs-toc-sidebar>
<div class=docs-toc-sticky>
<h4><i class="fas fa-list"></i> On this page</h4>
<nav id=TableOfContents>
<ul>
<li><a href=#apache-hive--hiveclient>Apache Hive : HiveClient</a></li>
<li><a href=#command-line>Command Line</a></li>
<li><a href=#jdbc>JDBC</a>
<ul>
<li><a href=#jdbc-client-sample-code>JDBC Client Sample Code</a>
<ul>
<li><a href=#running-the-jdbc-sample-code>Running the JDBC Sample Code</a></li>
</ul>
</li>
<li><a href=#jdbc-client-setup-for-a-secure-cluster>JDBC Client Setup for a Secure Cluster</a></li>
</ul>
</li>
<li><a href=#python>Python</a></li>
<li><a href=#php>PHP</a></li>
<li><a href=#odbc>ODBC</a></li>
<li><a href=#thrift>Thrift</a>
<ul>
<li><a href=#thrift-java-client>Thrift Java Client</a></li>
<li><a href=#thrift-c-client>Thrift C++ Client</a></li>
<li><a href=#thrift-node-clients>Thrift Node Clients</a></li>
<li><a href=#thrift-ruby-client>Thrift Ruby Client</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</aside>
</main>
</div>
</div>
<footer class="black-background static-bottom" style=padding:30px>
<div class=row>
<div class=col-3>
<a href=https://www.apache.org/>
<img src=https://hive.apache.org/images/asf_logo.png width=270 height=100 alt="Apache Software Foundation"></a>
</a>
</div>
<div class=col-9>
<p class=footer-text>Apache is a non-profit organization helping open-source
software projects released under the Apache
<a href=https://www.apache.org/licenses/>license</a>
and managed with
<a href=https://www.apache.org/foundation/how-it-works.html>
open governance</a> and
<a href=https://privacy.apache.org/policies/privacy-policy-public.html>
privacy policy</a>. See upcoming
<a href=https://www.apache.org/events/current-event>Apache Events</a>.
If you discover any
<a href=https://www.apache.org/security/>security</a> vulnerabilities, please
report them privately. Finally,
<a href=https://www.apache.org/foundation/sponsorship.html>thanks
</a> to the sponsors who
<a href=https://www.apache.org/foundation/contributing.html>
donate</a> to the Apache Foundation.
</p>
</div>
</div>
<div class="copyright row">
<a href=https://hive.apache.org style=color:grey>
The contents of this website are © 2023 Apache Software Foundation under the terms of the Apache License v2. Apache Hive and its logo are trademarks of the Apache Software Foundation.
</a>
</div>
</footer>
<script src=https://hive.apache.org/js/bootstrap.bundle.min.js></script>
</body>
</html>